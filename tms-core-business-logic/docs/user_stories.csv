"story_id","epic","title","user_role","description","business_value","priority","story_points","dependencies","acceptance_criteria","technical_tasks","definition_of_done"
"US-001","Core System & Odoo Foundation","Admin creates a new user account with a primary role","Admin","As an Admin, I want to create a new user account by providing their name, email, and assigning a primary role, so that I can securely grant a new employee the appropriate level of system access to perform their job duties.","Enables secure and controlled onboarding of new employees by provisioning role-based access to the system, ensuring users have the correct permissions from their first login.","Must Have","1","[]","[{""scenario"":""Successful creation of a new user with a primary role"",""given"":""I am logged in as an Admin and am on the 'Create User' screen"",""when"":""I enter a unique, valid email address, the user's full name, and select a 'Primary Role' (e.g., 'Dispatch Manager') from the available options"",""then"":""The system creates the new user account, the user appears in the list of system users, and the user is automatically assigned to the security group corresponding to the 'Dispatch Manager' role.""},{""scenario"":""Attempt to create a user with a non-unique email address"",""given"":""I am logged in as an Admin and am on the 'Create User' screen"",""when"":""I enter an email address that already exists for another user in the system and attempt to save"",""then"":""The system prevents the creation of the user and displays a clear, user-friendly error message such as 'A user with this email address already exists.'""}]","[""Initialize Odoo TMS Addon Structure"",""Implement Role-Based Access Control (RBAC) Groups""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by a senior developer"",""Unit tests implemented for the role assignment logic in `create`/`write` methods, with >80% coverage for new code"",""Manual end-to-end testing completed successfully in a staging environment"",""Security requirement (Admin-only access) validated"",""Story deployed and verified in the staging environment""]"
"US-002","Core System & Odoo Foundation","Admin edits an existing user account's details and permissions","Admin","As an Admin, I want to edit an existing user's details, primary role, and specific permissions, so that I can maintain accurate user records and ensure their access rights align with their current job responsibilities, upholding system security and operational integrity.","Ensures system security by enforcing the principle of least privilege. Maintains data accuracy for user records. Supports operational changes (promotions, role changes) and facilitates compliance with audit requirements.","Must Have","2","[""US-001"",""US-004""]","[{""scenario"":""Admin successfully edits a user's personal information"",""given"":""I am logged in as an Admin and I am on the user management screen viewing a list of users"",""when"":""I select a user, change their name from 'John Doe' to 'Johnathan Doe' in the edit form, and click 'Save'"",""then"":""The system displays a success confirmation message, and the user list now shows the name 'Johnathan Doe' for that user.""},{""scenario"":""Admin successfully changes a user's primary role"",""given"":""I am logged in as an Admin and I am editing the record of a user whose primary role is 'Driver'"",""when"":""I change their primary role to 'Dispatch Manager' and click 'Save'"",""then"":""The system saves the change, and the user is now assigned the default permissions associated with the 'Dispatch Manager' role and the 'Driver' role permissions are removed.""},{""scenario"":""Admin attempts to remove their own administrative privileges"",""given"":""I am logged in as an Admin and I am editing my own user account"",""when"":""I attempt to remove the 'Admin' role or the 'Settings' access group from my account and click 'Save'"",""then"":""The system must prevent the change and display a clear warning message, such as 'Action blocked: You cannot remove administrative privileges from your own account.'""}]","[""Implement Role-Based Access Control (RBAC) Groups"",""Extend 'res.partner' for Customer Master""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by at least one other developer"",""Unit tests for self-lockout prevention logic are implemented and passing with >80% coverage"",""Integration testing confirms that saving the user correctly updates related models and creates an audit trail entry"",""E2E testing confirms an Admin can edit a user and the edited user's permissions are correctly enforced"",""Security requirement for audit logging is validated"",""Story deployed and verified in the staging environment""]"
"US-003","Core System & Odoo Foundation","Admin deactivates a user account","Admin","As an Admin, I want to deactivate a user's account, so that I can immediately revoke their system access when they are no longer with the company, ensuring data security and maintaining an accurate list of active users.","Enhances system security by preventing unauthorized access from former employees. Preserves data integrity by retaining historical user actions for audit purposes instead of deletion. Supports compliance with data protection policies.","Must Have","2","[""US-001"",""US-002""]","[{""scenario"":""Successful deactivation of a standard user account"",""given"":""I am logged in as an 'Admin' and I am on the user management screen"",""when"":""I select an active user account and trigger the 'Deactivate' action, then confirm the action in the confirmation dialog"",""then"":""The system sets the user's status to 'Inactive', a success message is displayed, and the user is immediately unable to log in with their credentials.""},{""scenario"":""Admin attempts to deactivate their own account"",""given"":""I am logged in as an 'Admin' and I am viewing my own user record in the user management screen"",""when"":""I attempt to find or use the 'Deactivate' action for my own account"",""then"":""The 'Deactivate' action must be disabled, hidden, or result in an error message stating that self-deactivation is not permitted.""},{""scenario"":""Deactivated user's active session is terminated"",""given"":""A user is currently logged into the system in an active session"",""when"":""An 'Admin' deactivates that user's account from a separate session"",""then"":""The user's active session is immediately invalidated, and upon their next action (e.g., page navigation, API call), they are forcefully logged out and redirected to the login page.""}]","[""Leverage Odoo's standard 'active' field on res.users"",""Implement session invalidation logic""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented for the deactivation logic and self-deactivation prevention, achieving >80% coverage"",""Integration testing completed to verify login failure and API access denial for deactivated users"",""Security requirement for immediate session termination is validated"",""Audit trail logging is confirmed to be working as expected"",""Story deployed and verified in the staging environment""]"
"US-004","Core System & Odoo Foundation","Admin assigns a primary role to a user","Admin","As an Admin, I want to assign a single, predefined primary role (like Dispatch Manager, Finance Officer, or Driver) to a user account, so that I can efficiently manage access control and ensure each user has the appropriate permissions to perform their job duties according to the principle of least privilege.","Enforces a secure and manageable Role-Based Access Control (RBAC) system. Simplifies user onboarding and role changes, reduces the risk of unauthorized access, and ensures compliance with the principle of least privilege.","Must Have","2","[""US-001"",""US-070""]","[{""scenario"":""Assign a primary role to a user"",""given"":""I am logged in as an Admin and am viewing the user management form for an existing user."",""when"":""I select a primary role, for example 'Dispatch Manager', from the 'Primary Role' dropdown and save the user's record."",""then"":""The system successfully saves the change, assigns the 'Dispatch Manager' role to the user, and their permissions are immediately updated to reflect that role's access rights.""},{""scenario"":""Role selection is mutually exclusive"",""given"":""I am logged in as an Admin and am on the user management form."",""when"":""I interact with the 'Primary Role' field."",""then"":""The UI element must only allow the selection of a single role, enforcing Business Rule BR-001.""},{""scenario"":""Admin attempts to change their own role to a non-Admin role"",""given"":""I am logged in as an Admin and am editing my own user profile."",""when"":""I attempt to change my 'Primary Role' from 'Admin' to 'Driver' and save the record."",""then"":""The system must prevent the change and display a clear validation error message, such as 'Administrators cannot revoke their own admin privileges.'""}]","[""Implement Role-Based Access Control (RBAC) Groups""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by at least one other developer"",""Unit tests for the role-switching logic are implemented with >80% coverage and are passing"",""Integration testing completed to confirm permissions are correctly applied"",""Security requirement to prevent admin self-demotion is validated"",""Audit trail functionality is verified"",""Story deployed and verified in the staging environment""]"
"US-005","Core System & Odoo Foundation","Admin grants additional specific permissions to a user group","Admin","As an Admin, I want to grant specific, granular permissions (like 'read-only access to invoices') to a user group, so that I can customize access rights beyond the standard roles to meet unique operational needs and enforce the principle of least privilege.","Provides the flexibility to tailor user access to specific business needs without creating numerous rigid roles. Enhances security by allowing adherence to the principle of least privilege, ensuring users only have access to the data and functions necessary for their job.","Must Have","1","[""US-001"",""US-004""]","[{""scenario"":""Granting a new 'Read' permission to a standard role"",""given"":""I am logged in as an Admin, and a 'Dispatch Manager' user exists who belongs to the 'Dispatch Manager' group."",""when"":""I navigate to 'Settings > Users & Companies > Groups', select the 'Dispatch Manager' group, and add a new 'Read' access right for the 'Invoice' (account.move) model."",""then"":""The 'Dispatch Manager' user, upon their next login or page refresh, can now access the Invoicing menu and view invoices in a read-only state.""},{""scenario"":""Revoking a previously granted permission"",""given"":""The 'Dispatch Manager' group has 'Read' access to the 'Invoice' model."",""when"":""I, as an Admin, remove the 'Read' access right for the 'Invoice' model from the 'Dispatch Manager' group."",""then"":""The 'Dispatch Manager' user immediately loses access to the Invoicing menu and can no longer view any invoices.""}]","[""Leverage Odoo's standard security group and access rights management UI""]","[""All acceptance criteria validated and passing"",""Integration testing completed successfully, confirming permissions are applied correctly"",""Security requirements validated, especially audit logging of permission changes"",""Documentation updated to explain how to customize roles"",""Story deployed and verified in staging environment""]"
"US-006","Master Data Management","Admin creates a new vehicle record","Admin","As an Admin, I want to create a new vehicle record by entering its key details like truck number, model, capacity, and ownership status, so that the vehicle is officially registered in the system and can be managed, assigned to trips, and tracked for operational and financial purposes.","Establishes the foundational master data for the vehicle fleet, enabling core functionalities like trip assignment, expense tracking, and operational reporting. This is critical for the system's primary purpose.","Must Have","3","[""US-058"",""US-070""]","[{""scenario"":""Successful creation of a new vehicle record with all mandatory fields"",""given"":""I am logged in as an Admin and am on the 'Vehicles' list view"",""when"":""I click the 'Create' button, fill in all mandatory fields (Truck Number, Model, Capacity, Owner Details, Fuel Type) with valid and unique data, and click 'Save'"",""then"":""A new vehicle record is successfully created in the system, I am redirected to the new vehicle's form view, and a confirmation message is displayed. The vehicle's status defaults to 'Active'.""},{""scenario"":""Attempt to create a vehicle with a duplicate Truck Number"",""given"":""A vehicle with the Truck Number 'KA01AB1234' already exists in the system"",""when"":""I attempt to create a new vehicle and enter 'KA01AB1234' in the Truck Number field and click 'Save'"",""then"":""The system prevents the record from being saved and displays a clear, user-friendly error message stating that the 'Truck Number must be unique'.""},{""scenario"":""Attempt to create a vehicle without filling in a mandatory field"",""given"":""I am on the 'Create Vehicle' form"",""when"":""I fill in the Truck Number but leave the mandatory 'Capacity' field blank and click 'Save'"",""then"":""The system prevents the record from being saved and visually highlights the 'Capacity' field, displaying a message that it is a required field.""}]","[""Create 'tms.vehicle' Model and Views""]","[""All acceptance criteria are validated and passing."",""Code has been peer-reviewed and merged into the main branch."",""Unit tests for the model's constraints and methods are written and achieve >80% coverage."",""Automated E2E tests for the happy path and key error conditions are implemented and passing."",""The feature is deployed and verified in the staging environment by a QA engineer."",""The UI is confirmed to be responsive and meets accessibility standards.""]"
"US-007","Master Data Management","Admin edits an existing vehicle record","Admin","As an Admin, I want to edit the details of an existing vehicle record, so that I can ensure all vehicle information is accurate and up-to-date, which is critical for operational planning, compliance, and financial reporting.","Ensures data integrity for the vehicle fleet, which is foundational for accurate trip planning, compliance tracking (e.g., service dates), and operational reporting. Prevents errors caused by outdated information.","Must Have","2","[""US-006"",""US-071"",""US-072"",""US-025""]","[{""scenario"":""Successfully edit and save a vehicle record"",""given"":""I am an 'Admin' user logged into the system and am viewing the form for an existing vehicle"",""when"":""I modify one or more fields (e.g., change 'Capacity' from 20 to 25) and click 'Save'"",""then"":""The system successfully saves the changes, I see a confirmation message, and the updated information is immediately visible on the vehicle's form and list view.""},{""scenario"":""Attempt to save with a duplicate Truck Number"",""given"":""I am an 'Admin' user editing vehicle 'V-001', and another vehicle 'V-002' already exists with the Truck Number 'KA01AB1234'"",""when"":""I change the 'Truck Number' of 'V-001' to 'KA01AB1234' and click 'Save'"",""then"":""The system must prevent the save operation and display a clear, user-friendly error message such as 'Truck Number must be unique. KA01AB1234 is already assigned to another vehicle.'""},{""scenario"":""Non-Admin user attempts to edit a vehicle"",""given"":""I am logged in as a user with the 'Driver' or 'Finance Officer' role"",""when"":""I navigate to the vehicle list view and open a vehicle's form"",""then"":""The 'Edit' button must not be visible, and all fields must be read-only.""}]","[""Create 'tms.vehicle' Model and Views""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by at least one other developer"",""Unit tests for model validation logic implemented and passing with >80% coverage"",""Integration testing completed successfully in a staging environment"",""Security requirements (role-based access) validated"",""Audit trail generation is confirmed to be working as expected"",""Story deployed and verified in the staging environment""]"
"US-008","Master Data Management","Admin sets a vehicle's status to 'Active' or 'Inactive'","Admin","As an Admin, I want to set the status of a vehicle to 'Active' or 'Inactive', so that I can control which vehicles are available for new trip assignments while preserving the records of retired or unavailable vehicles for historical reporting.","Improves data integrity by preventing the assignment of unavailable vehicles, enhances operational efficiency by simplifying selection lists for dispatchers, and ensures complete historical data is retained for reporting and analysis.","Must Have","1","[""US-006"",""US-027""]","[{""scenario"":""Admin deactivates an available vehicle"",""given"":""I am logged in as an Admin and am viewing the record of a vehicle with the status 'Active' that is not assigned to any trip in a non-terminal state (e.g., 'In-Transit', 'Assigned')"",""when"":""I change the vehicle's status to 'Inactive' and save the record"",""then"":""The system saves the vehicle's status as 'Inactive'.\\nAND The vehicle no longer appears in the list of selectable vehicles when creating a new trip.""},{""scenario"":""Attempting to deactivate a vehicle assigned to an active trip"",""given"":""I am logged in as an Admin and am viewing the record of a vehicle that is currently assigned to a trip with a status of 'Assigned' or 'In-Transit'"",""when"":""I attempt to change the vehicle's status to 'Inactive' and save"",""then"":""The system prevents the status change.\\nAND The system displays a user-friendly error message, such as 'This vehicle cannot be deactivated as it is currently assigned to an active trip (Trip ID: [Trip ID]).'""}]","[""Create 'tms.vehicle' Model and Views""]","[""All acceptance criteria validated and passing in a staging environment."",""Code is peer-reviewed and adheres to project coding standards (Flake8, Black)."",""Unit tests are written for the business logic (e.g., blocking deactivation) and achieve required coverage."",""Integration testing confirms that the vehicle selection list on the trip form is correctly filtered."",""Security permissions are verified to ensure only authorized users can change the status."",""The feature is deployed and verified in the staging environment.""]"
"US-009","Master Data Management","Admin attaches a document with an expiry date to a vehicle record","Admin","As an Admin, I want to upload vehicle-specific documents (like Insurance, RC, Fitness Certificate), categorize them, and set their expiry dates, so that I can maintain a centralized, digital record of all compliance documents and enable the system to generate timely renewal alerts, ensuring our fleet remains legally operational at all times.","Ensures legal and regulatory compliance by tracking critical vehicle documents, preventing fines and operational downtime from expired certifications. Centralizes documentation for easy access and auditing.","Must Have","5","[""US-006""]","[{""scenario"":""Successfully upload a new, valid document to a vehicle"",""given"":""I am an Admin logged into the system and am viewing the form for an existing vehicle"",""when"":""I navigate to the 'Documents' section and click 'Add Document', then I select a 'Document Type', choose a future 'Expiry Date', upload a valid file (PDF, JPG, PNG under 5MB), and click 'Save'"",""then"":""The document is successfully uploaded and associated with the vehicle record, and the new document appears in the list of documents for that vehicle, displaying the type, expiry date, and a link to view/download the file.""},{""scenario"":""Attempt to save a document without required fields"",""given"":""I am an Admin on the 'Add Document' form for a vehicle"",""when"":""I attempt to click 'Save' without selecting a 'Document Type' OR without selecting an 'Expiry Date' OR without attaching a file"",""then"":""The system prevents the record from being saved and displays a clear validation error message for each missing required field (e.g., 'Document Type is required.').""},{""scenario"":""Attempt to upload a file that exceeds the size limit"",""given"":""I am an Admin on the 'Add Document' form"",""when"":""I attempt to upload a file larger than 5MB"",""then"":""The system rejects the file and displays a user-friendly error message: 'File size exceeds the 5MB limit.'""}]","[""Implement Vehicle Document Management""]","[""All acceptance criteria validated and passing in a staging environment."",""Code has been peer-reviewed and merged into the main development branch."",""Unit tests for the new model and business logic have been implemented, passing with >= 80% coverage."",""Integration testing confirms that files are correctly stored in and retrieved from the S3 bucket."",""Security testing has confirmed that file access is restricted to authorized users."",""The story has been successfully deployed and verified in the staging environment.""]"
"US-010","Master Data Management","Admin logs a service history entry for a vehicle","Admin","As an Admin, I want to create, view, and manage detailed service history entries for each vehicle, including date, cost, service type, and odometer reading, so that I can maintain a complete and accurate maintenance log for the fleet, track vehicle-specific costs, and schedule future preventative maintenance effectively.","Provides a centralized and accurate record of all vehicle maintenance activities, which is essential for tracking total cost of ownership, ensuring vehicle safety and compliance, scheduling preventative maintenance to reduce downtime, and calculating accurate vehicle profitability.","Should Have","2","[""US-006""]","[{""scenario"":""Successfully create a new service history entry"",""given"":""I am an Admin logged into the system and I am viewing the form for a specific vehicle"",""when"":""I navigate to the 'Service History' tab and click 'Add a new service entry' AND I fill in all mandatory fields (Service Date, Service Type, Cost, Odometer Reading) with valid data and click 'Save'"",""then"":""The new service entry is created and appears in the 'Service History' list for that vehicle, sorted with the most recent entry at the top.""},{""scenario"":""Attempt to save a service entry with a future date"",""given"":""I am an Admin creating a new service entry"",""when"":""I enter a date in the future for the 'Service Date' field and attempt to save"",""then"":""The system must prevent the record from being saved and display a user-friendly validation error message, such as 'Service Date cannot be in the future'.""}]","[""Create 'tms.vehicle.service.log' model and views""]","[""All acceptance criteria validated and passing in a staging environment."",""Code has been peer-reviewed and merged into the main development branch."",""Unit tests covering model constraints and validation logic are implemented and achieve >80% coverage for the new code."",""Security rules have been tested to ensure only Admins can access the functionality."",""Story has been deployed and verified in the staging environment.""]"
"US-011","Core System & Odoo Foundation","Admin creates a new driver record by extending an HR employee","Admin","As an Admin, I want to create a new driver record by adding driver-specific details (like license information) to an existing HR employee record, so that I can properly onboard drivers into the Transport Management System, ensure compliance, and make them available for trip assignments.","Enables the creation of a compliant and operational driver pool, which is fundamental for trip assignment and management. This feature directly supports compliance with the Motor Vehicles Act by tracking license validity (REQ-BRC-002) and is a prerequisite for core logistics workflows.","Must Have","2","[]","[{""scenario"":""Successfully designate an existing HR employee as a driver with all required information"",""given"":""I am logged in as an Admin and am on the form view of an 'hr.employee' record that is not yet designated as a driver"",""when"":""I enable a flag (e.g., a checkbox 'Is a Driver'), enter a valid 'License Number' and a future 'License Expiry Date', and save the record"",""then"":""The system saves the employee record successfully, the driver-specific fields are visible and contain the saved data, and this employee now appears in the list of available drivers for trip assignments.""},{""scenario"":""Attempt to save a driver record without mandatory fields"",""given"":""I am logged in as an Admin and have enabled the 'Is a Driver' flag on an employee's form"",""when"":""I attempt to save the record without entering a 'License Number'"",""then"":""The system prevents the save operation and displays a user-friendly validation error message indicating that the 'License Number' is a required field.""},{""scenario"":""Driver-specific fields are hidden for non-driver employees"",""given"":""I am logged in as an Admin and am viewing the form of an 'hr.employee' record"",""when"":""The 'Is a Driver' flag is not enabled"",""then"":""The fields for 'License Number', 'License Expiry Date', 'License Scan', and 'Driver Status' are not visible on the form.""}]","[""Extend 'hr.employee' for Driver Master""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by a senior developer"",""Unit tests for model validation logic are implemented with >= 80% coverage and are passing"",""Integration testing completed to ensure the new driver is available for trip assignment"",""Security rules restricting access to the 'Admin' role are implemented and verified"",""Story deployed and verified in the staging environment""]"
"US-012","Master Data Management","Admin adds and manages driver license details and expiry date","Admin","As an Admin, I want to add and edit a driver's license number and license expiry date on their employee record so that I can maintain accurate compliance records, enable automated expiry alerts, and ensure the system can prevent drivers with expired licenses from being assigned to trips.","Enables enforcement of critical business rule BR-003 (no trip assignment for expired license), supports compliance with the Motor Vehicles Act (REQ-BRC-002), and provides the necessary data for the automated license expiry alert system (REQ-DAT-002).","Must Have","1","[""US-011""]","[{""scenario"":""Successfully add license details to a new driver record"",""given"":""I am an Admin logged into the system and I am viewing a driver's employee record that has no license information"",""when"":""I enter a valid, unique string in the 'License Number' field, select a future date in the 'License Expiry Date' field, and save the record"",""then"":""The system saves the record without errors, and the new license number and expiry date are correctly displayed when I reopen the record.""},{""scenario"":""System prevents saving with a past expiry date"",""given"":""I am an Admin editing a driver's record"",""when"":""I attempt to save the record after selecting a date in the past for the 'License Expiry Date'"",""then"":""The system must prevent the save operation and display a user-friendly validation error message, such as 'License expiry date cannot be in the past.'""},{""scenario"":""Non-Admin roles cannot edit license details"",""given"":""I am logged in as a user with a 'Dispatch Manager' or 'Finance Officer' role and am viewing a driver's record"",""when"":""I navigate to the section containing the license details"",""then"":""The 'License Number' and 'License Expiry Date' fields must be read-only or not visible, and I cannot modify them.""}]","[""Extend 'hr.employee' for Driver Master""]","[""All acceptance criteria validated and passing in the staging environment."",""Code has been peer-reviewed and merged into the main development branch."",""Unit tests for the model constraints have been written and achieve >80% coverage for the new logic."",""Security requirements (role-based access) have been manually tested and verified."",""The story has been successfully deployed and verified on the staging environment.""]"
"US-013","Master Data Management","Admin uploads a scanned copy of a driver's license","Admin","As an Admin, I want to upload a scanned copy of a driver's license to their profile so that I can maintain a complete digital record for compliance, easy verification, and quick access during audits.","Centralizes critical compliance documents, improves operational efficiency by eliminating the need for physical file searches, and mitigates risk by ensuring driver records are complete and verifiable.","Must Have","1","[""US-011""]","[{""scenario"":""Successful upload of a valid license file (Image)"",""given"":""I am logged in as an Admin and am on the form view of an existing driver record"",""when"":""I click the 'Upload License' field and select a valid image file (JPG or PNG) that is under 5MB"",""then"":""The file upload is successful, a success notification is shown, and a thumbnail of the license image is displayed in the designated field on the driver's form.""},{""scenario"":""Attempt to upload a file with an unsupported format"",""given"":""I am logged in as an Admin and am on the form view of an existing driver record"",""when"":""I attempt to upload a file with an unsupported extension, such as .docx or .zip"",""then"":""The system rejects the upload and displays a user-friendly error message stating 'Invalid file type. Please upload a JPG, PNG, or PDF file.'""},{""scenario"":""Attempt to upload a file exceeding the size limit"",""given"":""I am logged in as an Admin and am on the form view of an existing driver record"",""when"":""I attempt to upload a valid file type (e.g., JPG) that is larger than 5MB"",""then"":""The system rejects the upload and displays a user-friendly error message stating 'File size exceeds the 5MB limit.'""}]","[""Extend 'hr.employee' for Driver Master""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented for any custom logic and passing with >80% coverage"",""Integration testing with S3 storage is completed successfully"",""Security requirements validated, including role-based access checks"",""Story deployed and verified in the staging environment""]"
"US-014","Master Data Management","Admin sets a driver's status to 'Active' or 'Inactive'","Admin","As an Admin, I want to change a driver's status between 'Active' and 'Inactive' so that I can accurately manage the pool of available drivers and prevent unavailable drivers from being assigned to new trips.","Ensures operational accuracy by preventing assignments to unavailable drivers, maintains data integrity of the active driver pool, and preserves historical data for reporting by deactivating rather than deleting records.","Must Have","1","[""US-011"",""US-027""]","[{""scenario"":""Admin deactivates an available driver"",""given"":""I am logged in as an Admin and am viewing the record of a driver with the status 'Active' who is not assigned to any ongoing trips"",""when"":""I change the driver's status to 'Inactive' and save the record"",""then"":""The system updates the driver's status to 'Inactive' and the record is preserved in the database.""},{""scenario"":""Inactive driver is excluded from trip assignment"",""given"":""A driver's status has been set to 'Inactive'"",""when"":""A Dispatch Manager creates a new trip and accesses the dropdown list to assign a driver"",""then"":""The inactive driver's name must NOT appear in the list of available drivers.""},{""scenario"":""Admin attempts to deactivate a driver with an active trip"",""given"":""I am logged in as an Admin and a driver is assigned to a trip with a status of 'Assigned' or 'In-Transit'"",""when"":""I attempt to change that driver's status to 'Inactive'"",""then"":""The system must prevent the change and display a user-friendly error message like 'Cannot deactivate a driver with an active trip. Please reassign or complete the trip first.'""}]","[""Extend 'hr.employee' for Driver Master""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by at least one other developer"",""Unit tests for the business logic (e.g., active trip constraint) are written, passing, and meet coverage targets"",""Integration testing completed successfully in a staging environment"",""Security requirements (role-based access) are validated"",""Story is deployed and verified in the staging environment""]"
"US-015","Core System & Odoo Foundation","Admin creates a new customer record","Admin","As an Admin, I want to create a new customer record by entering their essential business details, including name, billing address, GSTIN, and contact information, so that the new customer is available in the system for trip planning, accurate invoicing, and maintaining a centralized client database.","Enables new business by onboarding clients into the system. Ensures data accuracy for logistics and financial operations. Creates a single source of truth for customer information, which is foundational for trip management and invoicing.","Must Have","2","[]","[{""scenario"":""Successful creation of a new customer with valid data"",""given"":""The Admin is logged into the system and has navigated to the Customer management screen"",""when"":""The Admin clicks the 'Create' button, fills in all mandatory fields (Customer Name, Billing Address, GSTIN, Contact Person) with valid data, and clicks 'Save'"",""then"":""The system successfully creates a new customer record, the record is saved to the database, and the Admin is viewing the form of the newly created customer.""},{""scenario"":""Attempt to save a new customer with an invalid GSTIN format"",""given"":""The Admin is on the new customer creation form"",""when"":""The Admin enters a GSTIN that does not match the standard Indian format (e.g., 'ABCDE1234F1Z' instead of '22ABCDE1234F1Z5') and attempts to save"",""then"":""The system prevents the record from being saved and displays a clear, user-friendly error message next to the GSTIN field, such as 'Invalid GSTIN format. Please enter a valid 15-digit GSTIN.'""},{""scenario"":""Attempt to save a new customer with a missing mandatory field"",""given"":""The Admin is on the new customer creation form"",""when"":""The Admin leaves the 'Customer Name' field blank but fills in other details and attempts to save"",""then"":""The system prevents the record from being saved, highlights the 'Customer Name' field, and displays a validation message indicating that the field is required.""}]","[""Extend 'res.partner' for Customer Master""]","[""All acceptance criteria validated and passing in a staging environment."",""Code has been peer-reviewed and merged into the main development branch."",""Unit tests for GSTIN validation logic are written and achieve >80% coverage."",""Integration tests confirm the extended `res.partner` model functions correctly."",""Security check confirms that access is restricted to authorized roles."",""The story has been demonstrated to the Product Owner and accepted.""]"
"US-016","Master Data Management","Admin manages multiple shipping locations for a customer","Admin","As an Admin, I want to add, view, and manage multiple shipping locations for a single customer record, so that Dispatch Managers can quickly and accurately select a pre-defined destination when creating a new trip, reducing errors and saving time.","Improves operational efficiency by speeding up the trip creation process. Increases data accuracy by reducing manual address entry errors. Centralizes customer location data for consistency.","Must Have","3","[""US-015""]","[{""scenario"":""Admin successfully adds a new shipping location to a customer"",""given"":""I am logged in as an Admin and am viewing the form for an existing customer."",""when"":""I navigate to the 'Shipping Locations' tab, click 'Add a line', fill in all mandatory address fields (e.g., Address, City, State, Pincode), and click 'Save'."",""then"":""The new shipping location is saved and displayed in the list of shipping locations for that customer, and the customer record is saved successfully.""},{""scenario"":""Shipping locations are available for selection during trip creation"",""given"":""A customer has multiple active shipping locations defined, and a Dispatch Manager is creating a new trip for that customer."",""when"":""The Dispatch Manager selects the customer in the trip creation form."",""then"":""The 'Destination' field dropdown should be populated with a list of the customer's active shipping locations, in addition to their primary billing address.""}]","[""Extend 'res.partner' for Customer Master""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented for any new model logic and passing with >80% coverage"",""Integration testing with the Trip Creation form completed successfully"",""Functionality is deployed and verified in the staging environment""]"
"US-017","Master Data Management","Admin creates and manages customer-specific rate agreements","Admin","As an Admin, I want to create and manage customer-specific rate agreements, defining rates based on routes, materials, and calculation methods (per km, per ton, fixed), so that trip revenue is calculated automatically and accurately, leading to correct invoicing.","Ensures accurate and consistent billing, reducing manual entry errors and customer disputes. Streamlines the trip creation and invoicing process by auto-populating agreed-upon rates, improving operational efficiency and financial accuracy.","Must Have","5","[""US-015"",""US-019"",""US-020""]","[{""scenario"":""Create a new 'Per Km' rate agreement for a customer"",""given"":""I am an Admin logged into the system and am viewing the 'ABC Corp' customer record"",""when"":""I navigate to the 'Rate Agreements' section, click 'Add', and enter a new rate with a specific Source, Destination, Material, select 'Per Km' as the Rate Type, and enter a numeric value for the rate"",""then"":""The system saves the new rate agreement, and it appears in the list of agreements for 'ABC Corp' with all the entered details correctly displayed.""},{""scenario"":""Attempt to create a duplicate rate agreement"",""given"":""A rate agreement already exists for 'ABC Corp' with Source 'Mumbai', Destination 'Delhi', and Material 'Steel Coils'"",""when"":""I attempt to create a new rate agreement for 'ABC Corp' with the exact same Source, Destination, and Material"",""then"":""The system prevents the save action and displays a user-friendly error message, such as 'A rate agreement for this customer, route, and material combination already exists.'""}]","[""Create 'tms.rate.agreement' model and views"",""Modify 'res.partner' view to include rate agreements""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented for model constraints and business logic, with >80% coverage"",""Integration testing with the customer model completed successfully"",""Security permissions are correctly implemented and verified"",""Story deployed and verified in the staging environment""]"
"US-018","Master Data Management","Admin sets a customer's status to 'Active' or 'Inactive'","Admin","As an Admin, I want to be able to set a customer's status to 'Active' or 'Inactive', so that I can control which customers are available for new business, preventing dispatchers from creating trips for clients we are no longer serving and keeping our master data clean.","Improves data integrity and operational efficiency by preventing the selection of non-serviceable customers for new trips. Reduces the risk of errors in trip planning and invoicing.","Must Have","1","[""US-015"",""US-026"",""US-070""]","[{""scenario"":""Admin deactivates an active customer"",""given"":""I am logged in as an Admin and am viewing an 'Active' customer's record"",""when"":""I change the customer's status to 'Inactive' (e.g., click the 'Archive' action) and confirm"",""then"":""the customer's record is marked as 'Inactive' and is hidden from the default customer list view AND this customer no longer appears in the customer selection dropdown when a Dispatch Manager creates a new trip.""},{""scenario"":""Inactive customer data is retained for reporting and financial records"",""given"":""a customer with historical trips and outstanding invoices has been set to 'Inactive'"",""when"":""a Finance Officer views the customer ledger or an Admin generates a historical revenue report"",""then"":""the inactive customer's financial data remains accessible and is included in historical reports.""}]","[""Extend 'res.partner' for Customer Master"",""Update domain filter on trip form's customer field""]","[""All acceptance criteria validated and passing in a staging environment."",""Code has been peer-reviewed and merged into the main branch."",""Unit tests for the overridden `toggle_active` method are written and achieve >80% coverage for the new logic."",""Automated integration tests confirm the domain filter on the trip form and the access control restrictions."",""Security requirement (Admin-only access) is validated."",""Story is deployed and verified in the staging environment.""]"
"US-019","Master Data Management","Admin creates and manages pre-defined transportation routes","Admin","As an Admin, I want to create and manage a master list of pre-defined transportation routes, including a name, source, destination, standard distance, and estimated transit time, so that Dispatch Managers can quickly select a standard route during trip creation, ensuring consistency, reducing manual entry errors, and speeding up the planning process.","Improves operational efficiency by reducing manual data entry for trip creation. Enhances data accuracy and consistency by standardizing common routes. Provides a foundation for more accurate trip time and cost estimations.","Must Have","2","[""US-001""]","[{""scenario"":""Admin successfully creates a new pre-defined route"",""given"":""The user is logged in as an 'Admin' and has navigated to the 'Routes' management screen"",""when"":""The user initiates the creation of a new route and fills in all mandatory fields ('Route Name', 'Source', 'Destination', 'Standard Distance') with valid data"",""then"":""The system saves the new route record to the database and it appears in the list of pre-defined routes.""},{""scenario"":""System prevents route creation with missing mandatory information"",""given"":""The user is on the new route creation form"",""when"":""The user attempts to save the route without providing a 'Route Name', 'Source', or 'Destination'"",""then"":""The system prevents the record from being saved and displays a clear validation message indicating which fields are required.""},{""scenario"":""Non-Admin users cannot access route management"",""given"":""A user is logged in with a role other than 'Admin' (e.g., 'Dispatch Manager', 'Finance Officer', 'Driver')"",""when"":""The user attempts to navigate to the route management section via direct URL or menu"",""then"":""The system denies access and displays an authorization error, and the menu item for route management is not visible to them.""}]","[""Create 'tms.route' Model and Views""]","[""All acceptance criteria validated and passing"",""Code for the `tms.route` model, views, and security rules is written, reviewed, and merged"",""Unit tests covering model constraints and validations are implemented and achieve >80% coverage for the new code"",""Manual E2E testing confirms all user interactions and validations work as expected"",""Security testing confirms that non-Admin roles cannot access the functionality"",""The feature is deployed and verified in the staging environment without regressions""]"
"US-020","Master Data Management","Admin manages the list of material types and their handling instructions","Admin","As an Admin, I want to create, view, edit, and deactivate material types and their associated special handling instructions, so that I can ensure data consistency across the system and provide critical handling information to operational staff for safety and compliance.","Ensures data integrity for accurate reporting, enhances operational safety by standardizing handling instructions, and improves efficiency in the trip creation process by providing a predefined list of materials.","Must Have","1","[""US-001""]","[{""scenario"":""Admin creates a new material type successfully"",""given"":""The user is logged in as an Admin and is on the 'Material Types' list view"",""when"":""The user clicks 'New', enters a unique name (e.g., 'Industrial Solvents') and optional handling instructions (e.g., 'Hazardous Material - Requires ventilation'), and clicks 'Save'"",""then"":""The system creates a new, active material type record, and it appears in the list view.""},{""scenario"":""System prevents creation of a material type with a duplicate name"",""given"":""A material type with the name 'Cement Bags' already exists"",""when"":""The Admin attempts to create a new material type and enters 'Cement Bags' as the name"",""then"":""The system prevents saving the record and displays a user-friendly validation error message, such as 'A material type with this name already exists.'""},{""scenario"":""Deactivated material types are not available for selection on new trips"",""given"":""The material type 'Obsolete Part' has been archived"",""when"":""A Dispatch Manager creates a new trip and accesses the 'Material' selection field"",""then"":""The 'Obsolete Part' material type does not appear in the list of available options.""}]","[""Create 'tms.material' Model and Views""]","[""All acceptance criteria validated and passing"",""Code is peer-reviewed and merged into the main development branch"",""Unit tests covering model constraints (uniqueness, required) are implemented and achieve >80% coverage for the new model"",""Access control rules are implemented and verified for Admin and other relevant roles"",""The feature is deployed and verified in the staging environment""]"
"US-021","GPS Tracking & Geofencing","Admin defines a geofence for a key location","Admin","As an Admin, I want to create, view, and manage named geographical boundaries (geofences) on a map for key locations like customer sites and warehouses, so that the system can automatically detect and trigger alerts when a vehicle enters or exits these areas, enabling proactive monitoring and operational automation.","Enables automated, real-time monitoring of vehicle movements at critical locations, improving operational efficiency, security, and providing data for performance analysis (e.g., turnaround time). This is a foundational feature for proactive logistics management.","Must Have","8","[""US-029"",""US-001""]","[{""scenario"":""Admin successfully creates a new polygonal geofence"",""given"":""The Admin is logged in and has navigated to the 'Geofence Management' screen, which displays an interactive map."",""when"":""The Admin clicks the 'Create' button, enters a unique name (e.g., 'Mumbai Central Warehouse'), draws a closed polygon on the map, and clicks 'Save'."",""then"":""The system saves the geofence with its name and coordinates, and the new geofence appears in the list of existing geofences and is visibly rendered on the map.""},{""scenario"":""Attempt to save a geofence with a duplicate name"",""given"":""A geofence named 'Main Depot' already exists, and the Admin is creating a new geofence."",""when"":""The Admin enters 'Main Depot' as the name for the new geofence and clicks 'Save'."",""then"":""The system prevents the save and displays a validation error, such as 'A geofence with this name already exists'.""},{""scenario"":""Non-Admin user attempts to access the geofence management page"",""given"":""A user with a 'Dispatch Manager' or 'Driver' role is logged into the system."",""when"":""The user attempts to navigate to the geofence management URL directly."",""then"":""The system denies access and displays an 'Access Denied' error, consistent with Odoo's security framework.""}]","[""Create 'tms.geofence' model with PostGIS field"",""Develop Odoo view with integrated Leaflet.js for drawing polygons""]","[""All acceptance criteria validated and passing."",""Code reviewed and approved by at least one other developer."",""Unit tests for backend models and validation logic achieve >80% coverage."",""E2E tests for the geofence creation and editing flow are implemented and passing."",""Access control rules are verified to restrict access to Admins only."",""Story deployed and verified in the staging environment by a QA engineer or product owner.""]"
"US-022","Core System & Odoo Foundation","Admin configures system-wide settings","Admin","As an Admin, I want a centralized settings page to configure system-wide parameters, such as session timeout, expense policies, and alert intervals, so that I can customize the application's behavior to match our company's security and operational policies without requiring code changes.","Enables the business to adapt the system to changing policies (security, operational) without developer intervention, enhancing security posture, ensuring compliance, and improving operational efficiency.","Must Have","5","[""US-004"",""US-070""]","[{""scenario"":""Admin can access the TMS settings page"",""given"":""I am logged in as a user with the 'Admin' role"",""when"":""I navigate to the main Odoo 'Settings' application"",""then"":""I should see a menu item or section titled 'Transport Management'""},{""scenario"":""Admin successfully edits and saves a setting"",""given"":""I am on the 'Transport Management' settings page"",""when"":""I change the value of 'Session Timeout (minutes)' to '45' and click 'Save'"",""then"":""the system should confirm the settings have been saved AND when I refresh the page, the 'Session Timeout (minutes)' field should display '45'""},{""scenario"":""Non-Admin user is denied access to the settings page"",""given"":""I am logged in as a user with the 'Dispatch Manager' role"",""when"":""I attempt to navigate directly to the URL for the 'Transport Management' settings page"",""then"":""the system must display an 'Access Denied' error and prevent me from viewing or editing any settings""}]","[""Implement 'res.config.settings' for TMS"",""Implement logic to read config parameters for various features""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by at least one other developer"",""Unit tests implemented for the settings model logic and validation, achieving >80% coverage"",""Integration testing completed to verify access control and that other modules can read the settings"",""Security requirements validated, including a manual test of access control for non-Admin roles"",""Story deployed and verified in the staging environment, including a manual E2E test of the session timeout feature""]"
"US-023","Financial Management & Invoicing","Admin configures maximum allowable expense amounts per category","Admin","As an Admin, I want to configure maximum allowable expense amounts for each expense category so that I can enforce company spending policies and streamline the approval process by automatically flagging high-value expenses for special review.","Enables automated enforcement of company expense policies, improves cost control by flagging high-value expenses, and increases operational efficiency by allowing standard approval flows for routine, low-value expenses.","Should Have","2","[""US-004""]","[{""scenario"":""Admin successfully sets a new expense threshold"",""given"":""I am logged in as an Admin and am on the 'Expense Threshold Configuration' page"",""when"":""I enter '500' into the amount field for the 'Food' category and click 'Save'"",""then"":""the system displays a success message confirming the settings have been updated AND the value '500.00' is persisted and displayed in the amount field for the 'Food' category on page reload.""},{""scenario"":""Admin attempts to save a non-numeric value"",""given"":""I am logged in as an Admin on the 'Expense Threshold Configuration' page"",""when"":""I enter 'abc' into the amount field for any category and click 'Save'"",""then"":""the system prevents saving and displays a validation error message, such as 'Please enter a valid numeric amount.' AND the previously saved value (or blank) remains in the field.""},{""scenario"":""Non-Admin user attempts to access the configuration page"",""given"":""I am logged in as a user with the 'Dispatch Manager' role"",""when"":""I attempt to navigate to the URL for the 'Expense Threshold Configuration' page"",""then"":""the system must deny access and display an Odoo standard access error message.""}]","[""Create model/view to store expense category thresholds""]","[""All acceptance criteria validated and passing."",""Code reviewed and approved by at least one other developer."",""Unit tests implemented for the model logic with >80% coverage."",""Security access rules are implemented and tested."",""Story deployed and verified in the staging environment.""]"
"US-024","System Infrastructure & DevOps (IaC/CI/CD)","Admin manages rules and recipients for system-level alerts","Admin","As an Admin, I want a dedicated interface to manage the rules, thresholds, and recipients for system-level alerts, so that I can ensure critical operational issues are promptly communicated to the correct personnel for swift resolution.","Improves system monitoring and operational responsiveness by ensuring the right people are notified of critical issues immediately. Reduces Mean Time To Resolution (MTTR) and prevents alert fatigue by allowing fine-grained control over notifications.","Must Have","8","[""US-001"",""US-004"",""US-060"",""US-088""]","[{""scenario"":""Admin can access the alert configuration interface"",""given"":""I am logged into the system as a user with the 'Admin' role"",""when"":""I navigate to the system settings area"",""then"":""I should see a menu item for 'System Alert Configuration' and be able to access the page.""},{""scenario"":""Configured alert is triggered and sent correctly"",""given"":""The 'GSP API Failure' alert is enabled and configured to notify the 'Finance Officer' group via Email"",""when"":""The system monitoring component (Alertmanager) detects a GSP API failure event"",""then"":""An email notification is sent to all active users within the 'Finance Officer' group.""},{""scenario"":""Attempt to save an alert rule without any recipients"",""given"":""I am configuring an alert rule on the 'System Alert Configuration' page"",""when"":""I enable the alert but do not select any users or user groups as recipients, and I click 'Save'"",""then"":""The system should prevent saving and display a user-friendly validation error, such as 'At least one recipient (user or group) must be selected.'""}]","[""Create Odoo model and views for alert configuration"",""Implement sync mechanism between Odoo config and Alertmanager config""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented with >80% coverage for the new models and logic"",""Integration testing completed to verify notifications are sent based on configuration"",""Security requirements validated (access restricted to Admins)"",""Technical documentation for the alert configuration and sync mechanism is created"",""Story deployed and verified in the staging environment""]"
"US-025","Core System & Odoo Foundation","Admin views the immutable audit trail for critical data changes","Admin","As an Admin, I want to access and filter a detailed, immutable audit trail of all changes made to critical data records, so that I can ensure system security, enforce accountability, and perform forensic analysis for compliance and troubleshooting.","Provides a tamper-proof record of all critical system activities, enhancing security, enabling forensic analysis, ensuring user accountability, and supporting regulatory compliance audits.","Must Have","8","[""US-001"",""US-004"",""US-026"",""US-037"",""US-039""]","[{""scenario"":""Admin accesses the audit trail view"",""given"":""I am logged in as a user with the 'Admin' role"",""when"":""I navigate to the 'Audit Trail' section within the system settings"",""then"":""I should see a list view of all audit log entries, sorted in reverse chronological order (newest first).""},{""scenario"":""Audit log entry for an 'Update' action shows old and new values"",""given"":""A Finance Officer has changed the status of an Invoice from 'Draft' to 'Posted'"",""when"":""I view the details of the corresponding 'Update' log entry in the audit trail"",""then"":""I should clearly see the field that was changed ('status'), the 'Old Value' ('Draft'), and the 'New Value' ('Posted').""},{""scenario"":""Admin attempts to modify or delete an audit log entry"",""given"":""I am logged in as an Admin and am viewing the audit trail"",""when"":""I attempt to edit or delete any log entry"",""then"":""The system must prevent the action, and no 'Edit' or 'Delete' options should be available in the UI for audit log records.""}]","[""Implement audit trail using `mail.thread`"",""Create custom audit log model for actions not covered by chatter"",""Override ORM methods (create, write, unlink) on critical models to log changes""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented with >80% coverage for the logging logic and passing"",""Integration testing completed for all audited models"",""Security testing confirms the immutability of the logs"",""Performance testing confirms the audit view meets NFRs"",""Story deployed and verified in the staging environment""]"
"US-026","Trip Lifecycle Management","Dispatch Manager creates a new trip","Dispatch Manager","As a Dispatch Manager, I want to create a new trip record by selecting a customer, defining the route, and specifying the material details and rate, so that I can formally initiate a transport job and move it into the planning and assignment phase.","Initiates the primary revenue-generating workflow of the system. Enables formal planning, resource allocation, tracking, and subsequent invoicing for a transport job.","Must Have","5","[""US-015"",""US-019"",""US-020""]","[{""scenario"":""Successful trip creation with all valid manual inputs"",""given"":""I am logged in as a Dispatch Manager and am on the 'New Trip' form"",""when"":""I select an 'Active' customer, manually enter a Source and Destination, select a Material, enter a Weight, select a Rate Type (e.g., 'Fixed'), enter a Rate value, and select a future Expected Delivery Date"",""then"":""The system successfully creates a new trip record with a unique ID, sets its initial status to 'Planned', and redirects me to the Trip List view where the new trip is visible at the top.""},{""scenario"":""Attempt to save a trip with missing mandatory fields"",""given"":""I am on the 'New Trip' form"",""when"":""I attempt to save the form without selecting a Customer (or Source, or Destination)"",""then"":""The system prevents the record from being saved and displays a clear, user-friendly validation message next to the required field (e.g., 'Customer is a required field').""},{""scenario"":""Customer selection field only shows active customers"",""given"":""There are both 'Active' and 'Inactive' customers in the system"",""when"":""I click on the 'Customer' selection field on the 'New Trip' form"",""then"":""The list of available customers for selection only contains customers with an 'Active' status.""}]","[""Create 'tms.trip' Model and Core Views""]","[""All acceptance criteria validated and passing in a staging environment."",""Code has been peer-reviewed and merged into the main branch."",""Unit tests for all new business logic and validations have been written and are passing with >80% coverage."",""Automated E2E tests for the happy path and key error conditions are passing."",""The feature has been demonstrated to and accepted by the Product Owner."",""All UI elements are mobile-responsive.""]"
"US-027","Trip Lifecycle Management","Dispatch Manager assigns an available vehicle and driver to a trip","Dispatch Manager","As a Dispatch Manager, I want to select an available vehicle and an available driver from filtered lists and assign them to a 'Planned' trip so that I can operationalize the trip, ensure compliance with company and regulatory rules, and move the trip to the 'Assigned' status, ready for execution.","Enables the transition of a trip from planning to execution, ensures efficient and compliant resource allocation, and prevents operational errors such as using unavailable or non-compliant assets.","Must Have","5","[""US-026"",""US-006"",""US-012""]","[{""scenario"":""Happy Path: Successful assignment of a valid vehicle and driver"",""given"":""I am a Dispatch Manager viewing a trip in 'Planned' status"",""when"":""I select an 'Active' vehicle with sufficient capacity and an 'Active' driver with a valid license, and save the assignment"",""then"":""The system successfully links the selected vehicle and driver to the trip record, the trip's status changes from 'Planned' to 'Assigned', and a confirmation message is displayed.""},{""scenario"":""Vehicle selection list is correctly filtered"",""given"":""I am a Dispatch Manager viewing a trip in 'Planned' status with a material weight of 18 Tons"",""when"":""I open the vehicle selection dropdown"",""then"":""The list of vehicles MUST NOT include any vehicles that are marked as 'Inactive' OR are currently assigned to another trip with a status of 'In-Transit'.""},{""scenario"":""Attempt to assign a vehicle with insufficient capacity"",""given"":""I am a Dispatch Manager viewing a trip in 'Planned' status with a material weight of 25 Tons"",""when"":""I attempt to select and assign a vehicle with a registered capacity of only 20 Tons"",""then"":""The system must prevent the assignment and display a clear, user-friendly error message, such as 'Assignment failed: Vehicle capacity (20 Tons) is less than the trip weight (25 Tons).'""}]","[""Implement Trip State Machine Logic"",""Implement Trip Assignment Validations""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests for domain filtering and validation logic are implemented and passing with >80% coverage"",""Integration testing of the assignment workflow completed successfully"",""Role-based security is confirmed (only Dispatch Manager/Admin can perform the action)"",""Story deployed and verified in the staging environment""]"
"US-028","Trip Lifecycle Management","Dispatch Manager selects a pre-defined route during trip creation","Dispatch Manager","As a Dispatch Manager, I want to select a pre-defined route from a list when creating a new trip, so that the source, destination, and standard distance are automatically populated, which saves me time and reduces data entry errors.","Increases operational efficiency by reducing manual data entry time for trip creation. Improves data accuracy and consistency by using standardized route information, leading to more reliable reporting and planning.","Must Have","1","[""US-019"",""US-026""]","[{""scenario"":""Happy Path: Select a pre-defined route and auto-populate trip details"",""given"":""I am a Dispatch Manager on the 'Create New Trip' form, and at least one pre-defined route exists in the system (e.g., 'Mumbai to Delhi', Distance: 1420 km)."",""when"":""I select the 'Mumbai to Delhi' route from the 'Route' selection field."",""then"":""The 'Source' field on the trip form is automatically populated with 'Mumbai'.\\nAND The 'Destination' field is automatically populated with 'Delhi'.\\nAND The 'Standard Distance' field is automatically populated with '1420'.""},{""scenario"":""Clear the route selection"",""given"":""I have selected a pre-defined route, and the 'Source', 'Destination', and 'Distance' fields have been auto-populated."",""when"":""I clear the selection in the 'Route' field."",""then"":""The 'Source', 'Destination', and 'Standard Distance' fields that were previously auto-populated must become empty.""}]","[""Create 'tms.trip' Model and Core Views"",""Create 'tms.route' Model and Views""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests for the onchange logic implemented and passing with >80% coverage"",""Integration testing completed successfully within the trip creation workflow"",""Performance requirements verified"",""Story deployed and verified in staging environment""]"
"US-029","GPS Tracking & Geofencing","Dispatch Manager views the real-time location of vehicles on a map","Dispatch Manager","As a Dispatch Manager, I want to see a real-time map displaying the current location of all my vehicles that are on 'In-Transit' trips so that I can monitor their progress, proactively identify potential delays, and provide accurate status updates to customers.","Provides real-time operational awareness, enabling proactive management of logistics, improved on-time delivery rates, and enhanced customer service through accurate ETA information.","Must Have","8","[""US-027"",""US-049""]","[{""scenario"":""Map displays all 'In-Transit' vehicles upon loading"",""given"":""I am logged in as a Dispatch Manager and there are multiple trips with the status 'In-Transit', each with a unique vehicle assigned and recent GPS data"",""when"":""I navigate to the 'Live Map' view"",""then"":""The map loads and displays a distinct marker for each 'In-Transit' vehicle at its last known location, and the map view is automatically zoomed and centered to encompass all markers.""},{""scenario"":""Vehicle marker position updates in near real-time"",""given"":""I am viewing the 'Live Map' and an 'In-Transit' vehicle is moving"",""when"":""The system receives a new GPS location update for that vehicle"",""then"":""The corresponding marker on the map smoothly moves to the new location without a full page reload, meeting the maximum 60-second latency requirement from device to UI.""},{""scenario"":""Vehicle marker is removed when trip status changes from 'In-Transit'"",""given"":""I am viewing the 'Live Map' with a marker for vehicle 'MH-01-AB-1234'"",""when"":""The trip associated with that vehicle is updated to 'Delivered', 'On Hold', or 'Canceled'"",""then"":""The marker for 'MH-01-AB-1234' is automatically removed from the map.""}]","[""Implement RabbitMQ Consumer in Odoo"",""Develop Live Map View"",""Develop FastAPI GPS Ingestion Endpoint"",""Containerize the FastAPI Microservice""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented for new logic with >= 80% coverage"",""Integration testing of the full data pipeline (mock GPS to Odoo DB) completed successfully"",""E2E tests for map loading, marker display, and updates are passing"",""Performance requirements for data latency and page load are verified in staging"",""Story deployed and verified in the staging environment""]"
"US-030","Trip Lifecycle Management","Dispatch Manager resolves an 'On Hold' trip and resumes its journey","Dispatch Manager","As a Dispatch Manager, I want to be able to change a trip's status from 'On Hold' back to 'In-Transit' after providing a mandatory resolution comment, so that I can officially resume a delayed trip and maintain a clear audit trail of how and when operational disruptions were resolved.","Enables operational continuity by allowing paused trips to resume, minimizing delivery delays. It also enhances accountability and process improvement by creating an auditable log of disruption resolutions.","Must Have","2","[""US-077"",""US-026""]","[{""scenario"":""Happy Path: Successfully resuming an 'On Hold' trip"",""given"":""I am logged in as a 'Dispatch Manager' and I am viewing the form for a trip that is currently in the 'On Hold' status"",""when"":""I click the 'Resume Trip' button, enter a resolution comment (e.g., 'Tire replaced, vehicle is cleared to proceed'), and confirm the action"",""then"":""The trip's status must immediately change from 'On Hold' to 'In-Transit'. AND A new entry must be created in the trip's event history (chatter) containing the resolution comment, my username, and the timestamp of the action.""},{""scenario"":""Error Condition: Attempting to resume a trip without a resolution comment"",""given"":""I am logged in as a 'Dispatch Manager' and have opened the 'Resume Trip' dialog for an 'On Hold' trip"",""when"":""I attempt to confirm the action without entering any text in the resolution comment field"",""then"":""The system must display a validation error message indicating that the resolution comment is mandatory. AND The dialog must remain open, and the trip's status must remain 'On Hold'.""},{""scenario"":""Security: An unauthorized user attempts to resume a trip"",""given"":""I am logged in as a user who is not a 'Dispatch Manager' or 'Admin' (e.g., 'Driver', 'Finance Officer')"",""when"":""I view the form for a trip that is in the 'On Hold' status"",""then"":""The 'Resume Trip' button must not be visible or must be disabled.""}]","[""Implement Trip State Machine Logic""]","[""All acceptance criteria validated and passing in a staging environment."",""Code has been peer-reviewed and merged into the main development branch."",""Unit tests covering the server action logic have been written and are passing with >= 80% coverage."",""Automated or manual integration tests confirm the correct UI behavior and role-based permissions."",""No security vulnerabilities have been introduced."",""Story deployed and verified in the staging environment.""]"
"US-031","Trip Lifecycle Management","Dispatch Manager cancels a trip","Dispatch Manager","As a Dispatch Manager, I want to cancel a trip at any stage before delivery and provide a mandatory reason, so that the system accurately reflects the trip's status, the assigned resources (vehicle and driver) are released for other jobs, and there is a clear audit trail for the cancellation.","Ensures data integrity by accurately reflecting operational reality. Improves resource utilization by immediately releasing assigned vehicles and drivers. Provides critical data for operational analysis by capturing reasons for cancellations.","Must Have","2","[""US-026"",""US-027"",""US-060"",""US-070""]","[{""scenario"":""Happy Path: Cancel an assigned trip with a valid reason"",""given"":""A Dispatch Manager is logged in and is viewing a trip with the status 'Assigned' or 'In-Transit'"",""when"":""The user clicks the 'Cancel Trip' action, enters a reason (e.g., 'Customer cancelled order') into the mandatory text field, and confirms the action"",""then"":""The trip's status is immediately updated to 'Canceled'. The cancellation reason is saved and displayed in the trip's event history (chatter). A notification is sent to the assigned driver informing them of the cancellation. The assigned vehicle and driver are marked as 'Available' if they are not assigned to another active trip.""},{""scenario"":""Error Condition: Attempt to cancel a trip without providing a reason"",""given"":""A Dispatch Manager is logged in and has initiated the 'Cancel Trip' action for an active trip"",""when"":""The user attempts to confirm the cancellation without entering any text in the mandatory reason field"",""then"":""The system prevents the cancellation. A validation error message is displayed, such as 'A reason for cancellation is required'. The trip's status remains unchanged.""},{""scenario"":""Edge Case: Attempt to cancel a trip that is already delivered or completed"",""given"":""A Dispatch Manager is logged in and is viewing a trip with a status of 'Delivered', 'Completed', 'Invoiced', or 'Paid'"",""when"":""The user views the available actions for the trip"",""then"":""The 'Cancel Trip' action/button is not visible or is disabled, preventing the user from initiating the cancellation process.""}]","[""Implement Trip Cancellation Logic""]","[""All acceptance criteria validated and passing in the staging environment."",""Code has been peer-reviewed and merged into the main branch."",""Unit tests covering state transitions and business logic are implemented and achieve >80% coverage for new code."",""Integration tests for the end-to-end flow are passing."",""The cancellation event is correctly logged in the system's audit trail as per REQ-DAT-008."",""The feature has been successfully deployed and verified in the staging environment.""]"
"US-032","Financial Management & Invoicing","Dispatch Manager views a queue of submitted expenses","Dispatch Manager","As a Dispatch Manager, I want to access a dedicated view that lists all submitted trip expenses awaiting my approval so that I can efficiently review and process them in a timely manner, ensuring accurate trip costing and prompt driver reimbursement.","Streamlines the expense approval workflow, provides a control point for operational spending, ensures timely reimbursement to drivers, and maintains data integrity for trip profitability calculations.","Must Have","1","[""US-053"",""US-026""]","[{""scenario"":""Viewing the list of pending expenses"",""given"":""I am logged in as a user with the 'Dispatch Manager' role and there are multiple expenses with the status 'Submitted'"",""when"":""I navigate to the 'Expense Approvals' menu item"",""then"":""I should see a list view containing only the expenses with the 'Submitted' status.""},{""scenario"":""Information displayed in the expense queue"",""given"":""I am viewing the 'Expense Approvals' list"",""when"":""The list of pending expenses is displayed"",""then"":""The list must, at a minimum, display columns for: Trip ID, Driver Name, Vehicle Number, Submission Date, Expense Type, and Amount.""},{""scenario"":""Unauthorized access attempt"",""given"":""I am logged in as a user with only the 'Driver' role"",""when"":""I attempt to access the 'Expense Approvals' menu item or its direct URL"",""then"":""The system must prevent access and display an 'Access Denied' error.""}]","[""Implement Expense Approval Queue and Actions""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by at least one other developer"",""Automated integration tests are created and passing in the CI pipeline"",""The new menu item and view are visible only to authorized user roles"",""Functionality is verified in the staging environment by a QA engineer or product owner""]"
"US-033","Financial Management & Invoicing","Dispatch Manager approves a submitted expense","Dispatch Manager","As a Dispatch Manager, I want to review the details of a submitted expense and approve it with a single action, so that I can validate its legitimacy, update the trip's financial record, and move the expense forward for reimbursement processing.","Ensures financial accuracy by validating trip-related costs before they impact profitability calculations and are sent for payment. This is a key financial control point in the trip lifecycle.","Must Have","2","[""US-053"",""US-032"",""US-070""]","[{""scenario"":""Happy Path: Successful approval of a submitted expense"",""given"":""I am a logged-in user with the 'Dispatch Manager' role and I am viewing the details of an expense with the status 'Submitted'"",""when"":""I click the 'Approve' button"",""then"":""The system must change the expense's status to 'Approved'. AND An immutable audit log entry must be created recording my user ID, the timestamp, the expense ID, and the status change from 'Submitted' to 'Approved' (as per REQ-DAT-008).""},{""scenario"":""Authorization: User without permission attempts to approve"",""given"":""I am a logged-in user with the 'Driver' role"",""when"":""I attempt to approve an expense (e.g., by navigating to the approval URL or making a direct API call)"",""then"":""The system must prevent the action and return an authorization error. AND The expense's status must remain 'Submitted'.""},{""scenario"":""Financial Impact: Trip profitability is updated correctly"",""given"":""A trip has a total revenue of $1000 and total 'Approved' expenses of $200, with a current profitability of $800."",""when"":""A Dispatch Manager approves a $50 expense for that trip"",""then"":""The trip's total 'Approved' expenses must be recalculated to $250. AND The trip's profitability must be recalculated to $750.""}]","[""Implement Expense Approval Queue and Actions""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by at least one other developer"",""Unit tests for the approval logic implemented with >80% code coverage and passing"",""Integration test verifying the update to trip profitability is implemented and passing"",""Security requirements (RBAC) validated via automated or manual testing"",""Story deployed and verified in the staging environment by QA""]"
"US-034","Financial Management & Invoicing","Dispatch Manager rejects a submitted expense with a mandatory reason","Dispatch Manager","As a Dispatch Manager, I want to reject a submitted expense claim and be required to provide a reason for the rejection, so that I can maintain financial control over trip costs, ensure compliance with company policy, and provide clear feedback to the driver for correction.","Ensures financial accuracy by preventing payment for invalid claims, enforces company expense policies, creates an audit trail for rejected expenses, and provides a feedback loop to drivers to reduce future errors.","Must Have","2","[""US-053"",""US-032"",""US-060"",""US-025""]","[{""scenario"":""Happy Path: Rejecting an expense with a valid reason"",""given"":""I am a Dispatch Manager logged into the system and am viewing an expense with the status 'Submitted'"",""when"":""I click the 'Reject' button, enter a reason like 'Receipt is blurry and unreadable' into the mandatory text field, and confirm the action"",""then"":""The system must update the expense's status to 'Rejected', the rejection reason must be saved and permanently associated with the expense record, the expense must be removed from my 'Pending Approval' queue, and a notification containing the rejection reason must be sent to the driver who submitted it.""},{""scenario"":""Error Condition: Attempting to reject an expense without providing a reason"",""given"":""I am a Dispatch Manager logged into the system and have opened the rejection dialog for a 'Submitted' expense"",""when"":""I attempt to confirm the rejection without entering any text in the reason field"",""then"":""The system must display a validation error message, such as 'A reason for rejection is required.', the rejection dialog must remain open, and the expense's status must remain 'Submitted'.""},{""scenario"":""System State: Rejected expense is excluded from financial calculations"",""given"":""An expense associated with a trip has been successfully rejected"",""when"":""I view the profitability calculation for that trip"",""then"":""The amount of the rejected expense must not be included in the trip's total expenses.""}]","[""Implement Expense Approval Queue and Actions""]","[""All acceptance criteria validated and passing."",""Code reviewed and approved by at least one other developer."",""Unit tests implemented for the state change logic, achieving >80% coverage on new code."",""Integration testing completed to ensure notifications and financial calculations are correct."",""Security requirements (role-based access) validated."",""Story deployed and verified in the staging environment without regressions.""]"
"US-035","Trip Lifecycle Management","Dispatch Manager views the profitability of a single trip","Dispatch Manager","As a Dispatch Manager, I want to view the automatically calculated revenue, total approved expenses, and net profitability directly on the trip's detail page, so that I can immediately assess the financial performance of each trip I manage and make more cost-effective decisions.","Provides immediate visibility into the financial health of individual trips, enabling data-driven decisions to improve profitability, control costs, and identify underperforming routes or clients.","Must Have","2","[""US-026"",""US-053"",""US-033"",""US-070""]","[{""scenario"":""Profitability calculation for a profitable trip"",""given"":""A Dispatch Manager is viewing a trip record with a 'Total Revenue' of ₹50,000"",""when"":""The trip has associated expenses with a status of 'Approved' totaling ₹12,000, and other expenses that are 'Pending' or 'Rejected'"",""then"":""A profitability section on the trip form displays 'Total Revenue' as ₹50,000, 'Total Approved Expenses' as ₹12,000, and 'Profitability' as ₹38,000.""},{""scenario"":""Role-based access control for profitability data"",""given"":""A user with the 'Driver' role is logged into the system"",""when"":""They view the details of their assigned trip"",""then"":""The entire profitability section (including Total Revenue, Total Approved Expenses, and Profitability fields) is not visible.""},{""scenario"":""Profitability calculation updates after an expense is approved"",""given"":""A Dispatch Manager is viewing a trip with a calculated profitability of ₹15,000"",""when"":""The manager approves a new 'Pending' expense of ₹1,000 for that same trip"",""then"":""The 'Total Approved Expenses' value updates to include the new expense, and the 'Profitability' value is recalculated and displayed as ₹14,000 upon view refresh.""}]","[""Create computed fields on 'tms.trip' for profitability calculation""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests for the computation logic implemented and passing with >80% coverage"",""Integration testing completed successfully"",""Security requirements validated by testing with different user roles"",""Story deployed and verified in staging environment""]"
"US-036","Reporting & Dashboards","Dispatch Manager generates and exports operational reports","Dispatch Manager","As a Dispatch Manager, I want to access, filter, and export key operational reports, so that I can analyze the performance of trips, vehicles, and drivers to identify inefficiencies and make data-driven decisions to improve our logistics.","Enables data-driven decision-making to improve operational efficiency, reduce costs by identifying underutilized assets or problematic routes, and enhance resource management.","Must Have","8","[""US-026"",""US-006"",""US-011"",""US-051""]","[{""scenario"":""Generating a Trip Report with default filters"",""given"":""I am on the reporting interface and there is existing trip data in the system"",""when"":""I select the 'Trip Report'"",""then"":""The system displays the report for a default date range (e.g., last 30 days) in a sortable table format with columns for Trip ID, Customer, Source, Destination, Driver, Vehicle, Start Date, End Date, and Status.""},{""scenario"":""Exporting a filtered report to Excel"",""given"":""I have generated a filtered report on the screen"",""when"":""I click the 'Export to Excel' button"",""then"":""The system initiates a download of an '.xlsx' file that contains the exact data and columns currently displayed in the on-screen report.""}]","[""Develop Suite of Standard Reports""]","[""All acceptance criteria validated and passing."",""Code reviewed and approved by at least one other developer."",""Unit tests implemented for all data aggregation logic, achieving >80% coverage."",""Performance testing confirms that report generation meets the specified NFRs."",""Story deployed and verified in the staging environment.""]"
"US-037","Financial Management & Invoicing","Finance Officer generates a GST-compliant e-invoice for a completed trip","Finance Officer","As a Finance Officer, I want to generate a GST-compliant e-invoice for a completed trip so that I can bill the customer accurately and comply with government tax regulations.","Ensures compliance with Indian GST e-invoicing laws, automates the billing process, reduces manual data entry errors, accelerates the payment cycle, and provides accurate financial records for reporting.","Must Have","13","[""US-015"",""US-026"",""US-052""]","[{""scenario"":""Happy Path: Successful e-invoice generation for a completed trip"",""given"":""I am a logged-in Finance Officer and there is a trip in the 'Completed' state with all required customer and rate information"",""when"":""I navigate to the trip record and click the 'Generate Invoice' button, review the auto-populated invoice details, and click 'Generate E-Invoice'"",""then"":""the system successfully communicates with the GSP API, receives a valid Invoice Reference Number (IRN) and signed QR code, updates the invoice status to 'Invoiced', updates the trip status to 'Invoiced', and makes the compliant PDF invoice (with IRN and QR code) available for download.""},{""scenario"":""Attempting to generate an invoice for a trip not in 'Completed' state"",""given"":""I am a logged-in Finance Officer and there is a trip in a state other than 'Completed' (e.g., 'In-Transit', 'Delivered')"",""when"":""I navigate to that trip record"",""then"":""the 'Generate Invoice' button is either disabled or not visible, preventing me from initiating the invoicing process.""},{""scenario"":""Invoice generation fails due to GSP API unavailability or server error"",""given"":""I am a Finance Officer attempting to generate an e-invoice"",""when"":""the GSP API is unreachable or returns a server-side error (e.g., 5xx status code)"",""then"":""the system flags the invoice for 'Manual Intervention', logs the API error details, and generates a high-priority alert on the dashboard for the Finance Officer role, as per REQ-FNC-006.""}]","[""Develop GSP API Client Service"",""Implement E-Invoice Generation Workflow"",""Update Invoice PDF Report with IRN and QR Code""]","[""All acceptance criteria validated and passing in the staging environment."",""Code has been peer-reviewed and merged into the main branch."",""Unit test coverage for new business logic is at or above 80%."",""Integration tests with the GSP sandbox API are passing."",""The generated PDF invoice has been visually and technically verified for compliance."",""Security review of the API key handling and external communication has been completed."",""The feature has been successfully demonstrated to the product owner/stakeholders.""]"
"US-038","Financial Management & Invoicing","Finance Officer manually intervenes on a failed e-invoice","Finance Officer","As a Finance Officer, I want to be immediately alerted to any e-invoice generation failures, view the specific error reason, and have the ability to retry the submission or mark it for manual handling, so that I can ensure all invoices are compliant with GST regulations and sent to customers without delay, preventing disruptions to our cash flow.","Ensures business continuity and GST compliance by providing a robust fallback mechanism for the critical e-invoicing process. This mitigates risks of delayed payments, improves cash flow, and maintains a complete audit trail for all invoicing attempts.","Must Have","5","[""US-037"",""US-087"",""US-060""]","[{""scenario"":""System flags invoice and alerts user after automated retries fail"",""given"":""An invoice has been submitted for e-invoicing, and the GSP integration's automated retry mechanism (with exponential backoff) has failed repeatedly"",""when"":""The final automated retry attempt fails"",""then"":""The invoice's status must be changed to 'E-Invoice Failed'.\\nAND a high-priority notification is sent to the 'Finance Officer' user group via the Odoo notification system and email.\\nAND the last known error message from the GSP API (e.g., 'Connection Timeout', 'Invalid Data') is stored and displayed prominently on the invoice form view.""},{""scenario"":""Finance Officer successfully retries a failed e-invoice submission"",""given"":""An invoice is in the 'E-Invoice Failed' state due to a temporary issue (e.g., GSP API was temporarily down)"",""when"":""The Finance Officer opens the invoice and clicks the 'Retry E-Invoicing' button"",""then"":""The system initiates a new synchronous API call to the GSP.\\nAND upon a successful response, the invoice status updates to 'Invoiced'.\\nAND the IRN and other e-invoice data are correctly populated on the invoice record.\\nAND the error message is cleared from the view.\\nAND the 'Retry E-Invoicing' and 'Mark as Manually Processed' buttons are hidden.""}]","[""Implement E-Invoice Generation Workflow"",""Add manual intervention states and actions to account.move""]","[""All acceptance criteria validated and passing in a staging environment."",""Code is peer-reviewed and merged into the main branch."",""Unit and integration tests are written and achieve a minimum of 80% coverage for the new logic."",""Security checks confirm that actions are restricted to authorized roles."",""The feature is deployed and verified in the staging environment without regressions.""]"
"US-039","Financial Management & Invoicing","Finance Officer records a payment against an invoice","Finance Officer","As a Finance Officer, I want to record partial or full payments received from a customer against a specific invoice, so that I can accurately track accounts receivable, maintain an up-to-date customer ledger, and manage the company's cash flow effectively.","Enables accurate tracking of accounts receivable and cash flow, which is critical for financial health monitoring. Ensures customer balances are correct, supporting good customer relationships and effective collections processes.","Must Have","1","[""US-037"",""US-015""]","[{""scenario"":""Record a full payment against an invoice"",""given"":""I am viewing a customer invoice that is in the 'Posted' state with an outstanding balance of ₹50,000"",""when"":""I click 'Register Payment' and confirm a payment of ₹50,000"",""then"":""The invoice's 'Amount Due' should be updated to ₹0, the invoice status should change to 'Paid', and a corresponding payment record should be created and reconciled with the invoice.""},{""scenario"":""Record a partial payment against an invoice"",""given"":""I am viewing a customer invoice that is in the 'Posted' state with an outstanding balance of ₹50,000"",""when"":""I click 'Register Payment' and confirm a payment of ₹20,000"",""then"":""The invoice's 'Amount Due' should be updated to ₹30,000, the invoice status should remain 'Posted' (but show it is partially paid), and a payment record of ₹20,000 should be created and linked to the invoice.""},{""scenario"":""Attempt to record a payment on a fully paid invoice"",""given"":""I am viewing an invoice that is already in the 'Paid' state"",""when"":""I look for the payment registration action"",""then"":""The 'Register Payment' button must not be visible or must be disabled.""}]","[""Leverage standard Odoo 'Register Payment' wizard""]","[""All acceptance criteria validated and passing."",""Code reviewed and approved by the development team."",""Unit and integration tests implemented and passing with sufficient coverage."",""Role-based access controls for this feature are verified."",""The story is deployed and verified in the staging environment.""]"
"US-040","Financial Management & Invoicing","Finance Officer views a customer's ledger","Finance Officer","As a Finance Officer, I want to access a detailed, chronological ledger for any given customer, so that I can efficiently track their complete history of invoices and payments, determine their current outstanding balance, and quickly resolve any billing inquiries.","Improves accounts receivable management and customer service by providing a single source of truth for a customer's financial history, enabling faster payment tracking and resolution of billing disputes.","Must Have","5","[""US-037"",""US-039"",""US-015"",""US-070""]","[{""scenario"":""Accessing the ledger from the customer record"",""given"":""a Finance Officer is logged into the system and is viewing a customer's main record page"",""when"":""the officer clicks on a smart button labeled 'Customer Ledger' or similar"",""then"":""the system navigates to a dedicated ledger view for that specific customer.""},{""scenario"":""Ledger line items display correct details and running balance"",""given"":""the customer ledger view is open"",""when"":""the user inspects the transaction list"",""then"":""each line item must display the Transaction Date, Type (e.g., 'Invoice', 'Payment'), Reference Number, a Debit amount (for invoices), a Credit amount (for payments), and a correctly calculated Running Balance.""},{""scenario"":""Access to the ledger is restricted by role"",""given"":""a user with the 'Dispatch Manager' or 'Driver' role is logged in"",""when"":""they navigate to a customer's record page"",""then"":""the 'Customer Ledger' smart button is not visible, and they cannot access the ledger view via any other means (e.g., direct URL).""}]","[""Implement Odoo's Partner Ledger report or create a custom view""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by at least one other developer"",""Unit tests for any custom logic (e.g., balance calculation) are implemented with >80% coverage and passing"",""Integration testing completed to ensure data flows correctly from invoices/payments to the ledger"",""Security access rules are tested and confirmed to be working as expected"",""Story deployed and verified in the staging environment""]"
"US-041","Financial Management & Invoicing","Finance Officer adds a non-trip-related expense to a vehicle","Finance Officer","As a Finance Officer, I want to create and record non-trip-related expenses (like maintenance, insurance, or fines) and associate them directly with a specific vehicle record, so that I can maintain a complete and accurate total cost of ownership for each vehicle and ensure these costs are included in profitability reports.","Provides a complete financial picture of each vehicle's operational cost, enabling accurate calculation of vehicle-specific profitability and total cost of ownership (TCO). This supports data-driven decisions on asset management and improves financial auditing.","Must Have","5","[""US-006"",""US-004""]","[{""scenario"":""Successfully create a new vehicle expense with all required details"",""given"":""I am logged in as a Finance Officer and am viewing a specific vehicle's record"",""when"":""I click the 'Add Expense' button, select an expense type (e.g., 'Maintenance'), enter an amount, select a date, add a description, upload a valid receipt PDF, and click 'Save'"",""then"":""A new vehicle expense record is created and linked to the correct vehicle, containing all the entered details and the attachment.""},{""scenario"":""Unauthorized user attempts to add a vehicle expense"",""given"":""I am logged in as a user with the 'Driver' role"",""when"":""I navigate to a vehicle's record form view"",""then"":""The 'Add Expense' button or functionality must not be visible or accessible.""},{""scenario"":""Expense is reflected in vehicle's history and reports"",""given"":""A new vehicle expense of $500 for 'Maintenance' has been successfully created for vehicle 'KA-01-AB-1234'"",""when"":""I view the record for vehicle 'KA-01-AB-1234' or generate the 'Vehicle Profitability Report' for that vehicle"",""then"":""The new $500 expense must be listed in the vehicle's expense history and correctly included in the total expenses calculation within the profitability report.""}]","[""Create 'tms.vehicle.expense' model and views""]","[""All acceptance criteria validated and passing in a staging environment."",""Code is peer-reviewed and merged into the main branch."",""Unit tests are written for the new models and business logic, achieving at least 80% coverage."",""Integration tests are created to verify the link to vehicles and the impact on reporting."",""Security access controls are tested and verified."",""The feature is deployed and verified in the staging environment.""]"
"US-042","Financial Management & Invoicing","Finance Officer creates and manages records for FASTag and diesel cards","Finance Officer","As a Finance Officer, I want to create, view, and manage records for company-issued FASTag and diesel cards, so that I can maintain a centralized and accurate inventory of these financial instruments, enabling better tracking and control over operational expenses.","Centralizes management of critical financial instruments, moving tracking from spreadsheets into the TMS. This improves data accuracy, provides visibility, and establishes the foundation for automated features like low-balance alerts and expense reconciliation.","Must Have","2","[""US-006""]","[{""scenario"":""Create a new FASTag card record"",""given"":""I am a logged-in user with the 'Finance Officer' role and I am on the 'Card Management' screen"",""when"":""I click the 'Create' button and fill in the form with valid details for a new FASTag card, including Card Number, Card Type ('FASTag'), Provider, Status ('Active'), and optionally assign it to a vehicle"",""then"":""The system saves the new card record, and it appears in the list of cards.""},{""scenario"":""Attempt to create a card with a duplicate number"",""given"":""A card with the number '1234567890' already exists"",""when"":""I attempt to create a new card and enter '1234567890' in the 'Card Number' field"",""then"":""The system prevents saving the record and displays a clear validation error message, such as 'A card with this number already exists.'""}]","[""Create 'tms.card' model and views""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented for the unique constraint and passing with >80% coverage for the new model"",""Integration testing of the vehicle link completed successfully"",""Security requirements (role access, data masking) validated"",""Story deployed and verified in the staging environment""]"
"US-043","Financial Management & Invoicing","Finance Officer manually updates a card's balance and sets its low-balance threshold","Finance Officer","As a Finance Officer, I want to manually update the current balance and set a low-balance notification threshold for each FASTag and diesel card, so that I can proactively manage card funds and receive automated alerts before a card's balance becomes critically low, preventing operational delays.","Enables proactive management of prepaid card funds, preventing service disruptions (e.g., failed toll payments) that can delay trips. This directly supports operational continuity and reduces financial risk.","Must Have","1","[""US-042""]","[{""scenario"":""Successfully update a card's balance"",""given"":""I am a logged-in Finance Officer viewing the form for a specific FASTag or diesel card"",""when"":""I enter a new, valid positive number in the 'Current Balance' field and save the record"",""then"":""The system must save the new balance, and the updated value must be displayed on the card's record.""},{""scenario"":""Updating balance below the threshold triggers an alert"",""given"":""I am a logged-in Finance Officer viewing a card record with a 'Low-Balance Threshold' set to 1000"",""when"":""I update the 'Current Balance' to 999 and save the record"",""then"":""The system must trigger the low-balance alert mechanism for this card, as defined in US-081.""},{""scenario"":""Attempt to save with a negative balance"",""given"":""I am a logged-in Finance Officer editing a card record"",""when"":""I enter '-100' into the 'Current Balance' field and attempt to save"",""then"":""The system must prevent the save operation and display a validation error message, such as 'Current Balance cannot be negative.'""}]","[""Extend 'tms.card' model and views with balance and threshold fields""]","[""All acceptance criteria validated and passing."",""Code reviewed and approved by at least one other developer."",""Unit tests covering validation logic and the alert trigger condition are implemented and achieve >80% coverage for the modified code."",""Integration testing with the alert mechanism (US-081) is completed successfully."",""Security rules restricting access to Finance Officers/Admins are implemented and verified."",""Story is deployed and verified in the staging environment without issues.""]"
"US-044","Financial Management & Invoicing","Finance Officer views the profitability of a single trip","Finance Officer","As a Finance Officer, I want to view the calculated profitability for any given trip, broken down into total revenue and the sum of all approved expenses, so that I can accurately assess the financial performance of individual jobs, identify trends, and support strategic pricing and cost-management decisions.","Provides granular financial insight into individual trips, enabling the business to identify profitable vs. unprofitable routes, customers, or services. This data supports strategic decision-making, improves pricing accuracy, and helps in cost control.","Must Have","2","[""US-026"",""US-053"",""US-033"",""US-070""]","[{""scenario"":""Profitability calculation for a profitable trip"",""given"":""I am logged in as a Finance Officer and viewing a 'Completed' trip with a revenue of ₹50,000 and two associated expenses with 'Approved' status, one for ₹10,000 and another for ₹5,000."",""when"":""I open the form view of this trip."",""then"":""I must see a dedicated profitability section that displays 'Total Revenue: ₹50,000', 'Total Approved Expenses: ₹15,000', and 'Net Profitability: ₹35,000'.""},{""scenario"":""Calculation correctly ignores non-approved expenses"",""given"":""I am logged in as a Finance Officer and viewing a trip with a revenue of ₹30,000. The trip has one 'Approved' expense of ₹8,000, one 'Pending' expense of ₹1,500, and one 'Rejected' expense of ₹500."",""when"":""I view the profitability section for this trip."",""then"":""The 'Total Approved Expenses' must be displayed as ₹8,000, and the 'Net Profitability' must be calculated as ₹22,000, correctly excluding the pending and rejected expenses.""},{""scenario"":""Role-based access control for profitability data"",""given"":""I am logged in as a Driver and am assigned to a trip."",""when"":""I open the view for my assigned trip."",""then"":""I must not be able to see the 'Total Revenue', 'Total Approved Expenses', or 'Net Profitability' fields or section.""}]","[""Create computed fields on 'tms.trip' for profitability calculation""]","[""All acceptance criteria validated and passing in a staging environment."",""Code has been peer-reviewed and merged into the main branch."",""Unit tests for the calculation logic have been written and achieve >80% coverage."",""A QA engineer has manually verified the UI and security rules for all relevant user roles."",""Story has been demonstrated to the Product Owner and accepted.""]"
"US-045","Reporting & Dashboards","Finance Officer generates a suite of financial reports for analysis","Finance Officer","As a Finance Officer, I want to access and generate a suite of financial reports (including an Aging Report, Customer Revenue, and Profitability reports) with filtering and export capabilities, so that I can effectively analyze the company's financial performance, manage receivables, and provide accurate insights to support strategic business decisions.","Provides critical financial insights for strategic decision-making, improves cash flow management by tracking overdue payments, identifies profitable customers and vehicles, and ensures financial accountability.","Must Have","8","[""US-037"",""US-039"",""US-033"",""US-026"",""US-015"",""US-006""]","[{""scenario"":""Generate Outstanding Invoices (Aging) Report"",""given"":""I am logged in as a Finance Officer and there are multiple unpaid and partially paid invoices with varying due dates"",""when"":""I navigate to the Reporting section and generate the 'Outstanding Invoices Report'"",""then"":""The system displays a report listing all invoices with an outstanding balance, grouped by customer, and categorized into aging buckets: 0-30, 31-60, 61-90, and 90+ days overdue, as specified in REQ-REP-001.""},{""scenario"":""Generate Trip Profitability Report"",""given"":""I am logged in as a Finance Officer and multiple trips have been completed with associated revenue and 'Approved' expenses"",""when"":""I generate the 'Trip Profitability Report' with a date range filter"",""then"":""The system displays a report listing individual trips within that range, showing Total Revenue, Total Approved Expenses, and the calculated Net Profit (Revenue - Expenses) for each trip.""},{""scenario"":""Export any generated report to PDF and Excel"",""given"":""I have successfully generated a financial report on the screen"",""when"":""I click the 'Export to PDF' or 'Export to Excel' button"",""then"":""The system downloads a file in the selected format containing the exact data displayed in the on-screen report, as required by REQ-REP-001.""}]","[""Develop Suite of Standard Reports""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests for all calculation logic implemented with >80% coverage"",""Performance requirements verified with a large dataset"",""Security requirements validated by testing access with unauthorized roles"",""Story deployed and verified in the staging environment""]"
"US-046","Driver Portal & Mobile Experience","Driver logs into the mobile-friendly web portal","Driver","As a Driver, I want to securely log into a simple, mobile-friendly web portal using my credentials, so that I can access my assigned trips, submit expenses, and update my status while on the go.","Enables drivers to access the system, which is the primary entry point for all field-based data capture (trip status, expenses, PODs). This is a foundational requirement for real-time operational visibility.","Must Have","5","[""US-001"",""US-004"",""US-014"",""US-047""]","[{""scenario"":""Successful login with valid credentials"",""given"":""A user with the 'Driver' role exists and is on the mobile-friendly login page"",""when"":""The driver enters their correct username and password and taps the 'Log In' button"",""then"":""The system validates the credentials, establishes a secure session, and redirects the driver to their main portal dashboard.""},{""scenario"":""Login attempt with invalid password"",""given"":""A user is on the login page"",""when"":""The user enters a valid username but an incorrect password and taps 'Log In'"",""then"":""The system displays a generic error message like 'Invalid username or password', the password field is cleared, and the user remains on the login page.""},{""scenario"":""Login page responsiveness on mobile device"",""given"":""A user is accessing the login page"",""when"":""The page is viewed on a device with a screen width of 360px"",""then"":""All UI elements (input fields, labels, button) are clearly visible, usable, and correctly formatted without horizontal scrolling.""}]","[""Develop Driver Portal UI Shell""]","[""All acceptance criteria are validated and passing in a staging environment."",""Code has been peer-reviewed and merged into the main branch."",""E2E automated tests for the login flow are created and passing."",""The feature has been successfully tested on representative iOS and Android devices/emulators."",""Security review confirms adherence to security NFRs."",""Accessibility scan (automated and manual) confirms WCAG 2.1 AA compliance."",""The story is deployed and verified in the staging environment by a QA engineer or product owner.""]"
"US-047","Driver Portal & Mobile Experience","Driver views their list of current and past trips","Driver","As a Driver, I want to view a clear, mobile-friendly list of my current and past trips, so that I can easily see my immediate assignments and review my work history for reference.","Improves operational efficiency by providing drivers with immediate, clear access to their assignments, reducing communication overhead with dispatch. Enhances driver trust and transparency by providing an accessible work history.","Must Have","3","[""US-046"",""US-027""]","[{""scenario"":""Default view shows current trips"",""given"":""a Driver is logged into the mobile web portal AND the driver has trips with statuses 'Assigned' and 'In-Transit'"",""when"":""the driver navigates to the 'My Trips' page"",""then"":""a list of their 'Current' trips is displayed by default, containing only the trips with 'Assigned' or 'In-Transit' status.""},{""scenario"":""Data is properly scoped to the logged-in driver"",""given"":""a Driver is logged in"",""when"":""they access the 'My Trips' page"",""then"":""the system must ensure that only trips explicitly assigned to that driver are ever fetched and displayed.""},{""scenario"":""Performance on long trip history"",""given"":""a Driver has a history of over 100 past trips"",""when"":""they view their 'Past Trips' list"",""then"":""the list must use lazy loading or pagination to load trips incrementally, ensuring the initial page load is under 3 seconds.""}]","[""Implement Driver's Trip List and Detail View""]","[""All acceptance criteria validated and passing."",""Code reviewed and approved by at least one other developer."",""Unit tests for the backend controller achieve >80% coverage."",""E2E tests for the happy path and 'no trips' scenarios are implemented and passing."",""Performance of the list loading has been verified against requirements."",""Backend API endpoint is confirmed to be secure via record rules."",""Story deployed and verified in the staging environment.""]"
"US-048","Driver Portal & Mobile Experience","Driver views and downloads documents for their currently assigned vehicle","Driver","As a Driver, I want to easily view and download all required legal documents (like RC, Insurance, Fitness Certificate) for the specific vehicle I am currently driving for a trip, so that I can quickly present them to authorities during on-road checks, ensuring compliance and avoiding delays or fines.","Enhances on-road compliance, reduces the risk of fines and operational delays, and mitigates issues from lost or damaged physical documents. Reinforces the TMS as the single source of truth for vehicle compliance.","Must Have","5","[""US-009"",""US-027"",""US-047""]","[{""scenario"":""Successful viewing and downloading of vehicle documents"",""given"":""a Driver is logged into the portal and is assigned to an active trip with a specific vehicle"",""when"":""the Driver navigates to the 'Vehicle Documents' section for their current trip"",""then"":""the system displays a list of all documents associated with that vehicle, showing the 'Document Type' and 'Expiry Date' for each, and provides options to both view and download each document.""},{""scenario"":""Display of expired vehicle documents"",""given"":""a Driver is viewing the document list for their assigned vehicle AND one of the documents (e.g., 'Insurance') has an expiry date in the past"",""when"":""the document list is displayed"",""then"":""the expired document is clearly and visually distinguished from valid documents (e.g., using red text, an 'Expired' label, or an icon).""},{""scenario"":""Security check for unauthorized document access"",""given"":""a Driver is assigned to a trip with Vehicle 'A' AND Vehicle 'B' exists in the system with its own documents"",""when"":""the Driver attempts to access the documents for Vehicle 'B' through any means (e.g., manipulating a URL parameter)"",""then"":""the system must deny access and return an authorization error.""}]","[""Develop Driver Portal OWL component for vehicle documents"",""Implement secured backend controller to serve document URLs""]","[""All acceptance criteria validated and passing in the staging environment."",""Code has been peer-reviewed and merged into the main branch."",""Unit tests covering the security rule and data retrieval logic are implemented and achieve >80% coverage."",""Automated E2E tests for the happy path and the negative security scenario are passing."",""Security review confirms that the access control mechanism is robust."",""Story is deployed and verified in the staging environment.""]"
"US-049","Driver Portal & Mobile Experience","Driver starts a trip from the mobile portal","Driver","As a Driver, I want to be able to mark a trip as 'In-Transit' when I begin my journey, so that the dispatch team is immediately aware that the delivery has started and the system can begin tracking my progress accurately.","Provides real-time operational visibility to dispatchers, enables accurate transit time tracking, triggers live GPS monitoring on dashboards, and creates a verifiable audit trail for trip milestones.","Must Have","2","[""US-027"",""US-046"",""US-047"",""US-050""]","[{""scenario"":""Happy Path: Driver successfully starts an assigned trip"",""given"":""I am a Driver logged into the mobile portal and viewing the details of a trip that is assigned to me and has the status 'Assigned'"",""when"":""I tap the 'Start Trip' button and confirm the action in the subsequent prompt"",""then"":""The system updates the trip's status to 'In-Transit' and the change is saved to the database.""},{""scenario"":""Action is unavailable for trips not in 'Assigned' status"",""given"":""I am a Driver viewing the details of a trip assigned to me"",""when"":""The trip's status is anything other than 'Assigned' (e.g., 'In-Transit', 'Delivered', 'Canceled')"",""then"":""The 'Start Trip' button must not be visible or must be disabled.""},{""scenario"":""Backend authorization check"",""given"":""I am a logged-in Driver"",""when"":""I attempt to trigger the 'start trip' action for a trip that is not assigned to me (e.g., via a direct API call)"",""then"":""The system must reject the request with an 'Access Denied' or similar authorization error, and the trip's status must not be changed.""}]","[""Implement Driver Trip Status Transitions""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by at least one other developer"",""Unit tests implemented for the backend logic with >80% coverage and all are passing"",""E2E test scenario for the happy path is automated and passing"",""Security requirements (server-side authorization) validated"",""Story deployed and verified in the staging environment""]"
"US-050","Driver Portal & Mobile Experience","Driver logs a trip event with an optional photo","Driver","As a Driver, I want to log specific events for my active trip, such as 'Accident' or 'Fueling', with an optional photo, so that I can maintain an accurate trip log and immediately inform the dispatch team of important updates or disruptions.","Provides real-time operational visibility into on-road events, enables faster response to critical incidents, and creates a detailed, auditable history for each trip. This data is crucial for analyzing delays and improving future planning.","Must Have","5","[""US-047"",""US-049"",""US-065"",""US-077""]","[{""scenario"":""Driver logs a non-critical event without a photo"",""given"":""I am a Driver logged into the mobile web portal and I have an active trip with the status 'In-Transit'"",""when"":""I navigate to the 'Log Event' screen for my active trip, select the event type 'Fueling', enter the text 'Filled 200 liters', and submit the form without attaching a photo"",""then"":""A new event record is created and associated with my trip, the event details (type, text, timestamp, driver) are saved correctly, the trip status remains 'In-Transit', and no high-priority alert is generated for managers.""},{""scenario"":""Driver logs a critical event with a photo, triggering a status change and alert"",""given"":""I am a Driver logged into the mobile web portal and I have an active trip with the status 'In-Transit'"",""when"":""I select 'Log Event', choose the event type 'Accident', enter 'Minor collision, vehicle is not drivable', attach a photo of the damage, and submit the form"",""then"":""A new event record is created with all details and the photo, the trip's status is automatically changed to 'On Hold', and a high-priority alert appears on the Admin/Manager dashboard.""},{""scenario"":""Attempting to log an event without an active trip"",""given"":""I am a Driver logged into the mobile web portal and I do not have any trips with the status 'In-Transit'"",""when"":""I view my list of trips"",""then"":""The option or button to 'Log Event' is not available or is disabled for all trips not in 'In-Transit' status.""}]","[""Implement 'tms.trip.event' model"",""Develop Driver Portal OWL component for event logging""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented for the new business logic with >80% coverage"",""Integration testing of the form submission, status change, and alert generation is completed successfully"",""Security requirements, especially for file uploads and data access, are validated"",""Story deployed and verified in the staging environment""]"
"US-051","Driver Portal & Mobile Experience","Driver reports a trip halt","Driver","As a Driver, I want to report that my trip is halted and provide a mandatory reason, so that the dispatch team is immediately aware of the delay and I have a formal record of the interruption.","Provides real-time visibility of operational delays to the dispatch team, enabling proactive customer communication and better logistics planning. Creates an auditable log of trip interruptions for performance analysis.","Must Have","3","[""US-046"",""US-047"",""US-049"",""US-065""]","[{""scenario"":""Driver successfully reports a trip halt"",""given"":""I am a Driver, logged into the Driver Portal and viewing the details of my active trip which is in 'In-Transit' status"",""when"":""I tap the 'Report Halt' button, enter a valid reason (e.g., 'Unexpected road closure due to accident'), and tap 'Submit'"",""then"":""The system records a 'Halt' event against the trip record, storing the reason, the driver's identity, and the current timestamp. AND A high-priority alert is generated and displayed on the dashboard for users with the 'Dispatch Manager' or 'Admin' role, as per REQ-REP-002.""},{""scenario"":""Driver attempts to report a halt without a reason"",""given"":""I am a Driver on the 'Report Halt' screen for my active trip"",""when"":""I tap the 'Submit' button without entering any text in the reason field"",""then"":""The submission is blocked. AND A validation error message is displayed on the screen, such as 'A reason for the halt is mandatory'.""}]","[""This is a specific type of Trip Event, can be handled by US-050""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented for the backend controller with >80% coverage"",""Integration testing completed to ensure the alert is generated correctly"",""Security requirements validated (authorization checks, input sanitization)"",""Story deployed and verified in staging environment""]"
"US-052","Driver Portal & Mobile Experience","Driver uploads a Proof of Delivery (POD)","Driver","As a Driver, I want to upload a Proof of Delivery (either a photo or a captured e-signature) and enter the recipient's name, so that I can formally confirm the delivery is complete, which updates the trip status to 'Delivered' and initiates the billing process.","Provides auditable proof of service completion, which is a prerequisite for customer invoicing. It also provides real-time operational visibility to the back-office team by updating the trip status instantly.","Must Have","5","[""US-046"",""US-047"",""US-049""]","[{""scenario"":""Happy Path: Driver successfully uploads a POD photo"",""given"":""a Driver is logged in and is viewing the details of a trip assigned to them with the status 'In-Transit'"",""when"":""the Driver selects the 'Upload POD' option, chooses the 'Photo' method, selects a valid image file, enters the recipient's name, and submits the form"",""then"":""the system successfully uploads the photo, associates it with the trip record, records the recipient's name and a server-side timestamp, changes the trip status to 'Delivered', and displays a success confirmation message to the Driver.""},{""scenario"":""Happy Path: Driver successfully captures an e-signature POD"",""given"":""a Driver is logged in and is viewing the details of a trip assigned to them with the status 'In-Transit'"",""when"":""the Driver selects the 'Upload POD' option, chooses the 'E-Signature' method, captures a signature on the screen, enters the recipient's name, and submits the form"",""then"":""the system converts the signature to an image file, successfully uploads it, associates it with the trip record, records the recipient's name and a server-side timestamp, changes the trip status to 'Delivered', and displays a success confirmation message.""},{""scenario"":""Error Condition: Submission without a recipient name"",""given"":""a Driver is on the POD submission screen and has provided a photo or signature"",""when"":""the Driver attempts to submit the form without entering the recipient's name"",""then"":""the system prevents submission, displays a clear validation error message like 'Recipient name is required', and the trip status remains 'In-Transit'.""}]","[""Implement Proof of Delivery (POD) Upload""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by at least one other developer"",""Unit and integration tests implemented with >80% coverage for new logic"",""E2E testing completed successfully in the staging environment"",""Performance on a simulated 4G network meets requirements"",""Security review confirms secure file handling and access control"",""Story deployed and verified in the staging environment""]"
"US-053","Financial Management & Invoicing","Driver submits a trip-related expense with receipt","Driver","As a Driver, I want to submit a trip-related expense through my mobile web portal by selecting the expense type, entering the amount, and uploading a photo of the receipt, so that I can get reimbursed for my on-road expenses and the company can accurately track the total cost of the trip.","Enables accurate and timely tracking of trip-related expenditures, which is crucial for calculating trip profitability, managing driver reimbursements, and maintaining financial records.","Must Have","5","[""US-046"",""US-047"",""US-032""]","[{""scenario"":""Successful submission of a standard expense (e.g., Toll)"",""given"":""I am a logged-in Driver and I am viewing an 'In-Transit' trip assigned to me"",""when"":""I navigate to the 'Add Expense' form, select 'Toll' as the type, enter '250.00' as the amount, upload a valid receipt image (JPG, <5MB), and press 'Submit'"",""then"":""The system must create a new expense record linked to my trip with a status of 'Submitted', store the uploaded receipt, and display a confirmation message 'Expense submitted successfully'.""},{""scenario"":""Attempt to submit with missing required fields"",""given"":""I am on the 'Add Expense' form for my trip"",""when"":""I select 'Food' as the type, upload a receipt, but leave the 'Amount' field blank and press 'Submit'"",""then"":""The system must prevent submission, display an inline validation error message 'Amount is a required field' next to the amount input, and the form data must be preserved.""},{""scenario"":""Attempt to upload a file that exceeds the size limit"",""given"":""I am on the 'Add Expense' form"",""when"":""I attempt to upload a PNG file that is 6MB in size"",""then"":""The system must reject the file and display an error message, 'File size cannot exceed 5MB.'""}]","[""Implement Driver Expense Submission Form""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented for all validation logic, achieving >80% coverage"",""Integration testing completed successfully (form -> DB -> S3)"",""Performance requirements verified on a throttled network connection"",""Security requirements validated (e.g., cannot submit expense for another driver's trip)"",""Story deployed and verified in staging environment""]"
"US-054","Financial Management & Invoicing","Driver includes odometer reading and fuel quantity for diesel expenses","Driver","As a Driver, I want to enter the vehicle's current odometer reading and the quantity of fuel purchased when I submit a 'Diesel' type expense, so that the company can accurately track fuel efficiency and I can get my expense claim processed correctly.","Enables accurate fuel efficiency (km/liter) tracking for the fleet, which is critical for cost control, vehicle maintenance planning, and validating fuel purchases. This directly supports the 'Fuel Efficiency Report' (REQ-REP-001).","Must Have","2","[""US-053"",""US-027""]","[{""scenario"":""Happy Path: Submitting a valid diesel expense"",""given"":""A Driver is logged in and on the 'Submit Expense' form for an active trip, and the vehicle's last recorded odometer reading was 50,000 km"",""when"":""The Driver selects 'Diesel' as the expense type, enters an amount, an odometer reading of 50,500, a fuel quantity of 100, and uploads a valid receipt"",""then"":""The expense is successfully submitted for approval, and the new expense record in the database contains the odometer reading of 50,500 and fuel quantity of 100.""},{""scenario"":""UI: Conditional field visibility"",""given"":""A Driver is on the 'Submit Expense' form"",""when"":""The Driver selects an expense type other than 'Diesel' (e.g., 'Toll', 'Food')"",""then"":""The 'Odometer Reading' and 'Fuel Quantity' fields are not visible.""},{""scenario"":""Error Condition: Odometer reading is lower than the previous reading"",""given"":""A Driver is submitting a 'Diesel' expense for a vehicle whose last recorded odometer reading was 50,000 km"",""when"":""The Driver enters an odometer reading of 49,999 and attempts to submit the form"",""then"":""The system prevents submission and displays a clear, user-friendly error message, such as 'Odometer reading must be greater than the last recorded value of 50,000 km.'""}]","[""Implement Driver Expense Submission Form""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by at least one other developer"",""Unit tests for the backend validation logic are implemented with >80% coverage and are passing"",""Integration testing of the form submission process is completed successfully"",""Performance of the odometer validation query is verified to be within acceptable limits"",""Story is deployed and verified in the staging environment by QA""]"
"US-055","Driver Portal & Mobile Experience","Driver submits a request for a cash advance","Driver","As a Driver, I want to submit a request for a cash advance through the mobile portal so that I can get the necessary funds for my trip expenses in a timely and trackable manner.","Streamlines the advance request process, moving it from informal channels to a trackable digital system. It improves financial accountability, reduces funding delays for the driver, and provides a clear audit trail for the finance and dispatch teams.","Should Have","3","[""US-046"",""US-011"",""US-060""]","[{""scenario"":""Successful submission of a new advance request"",""given"":""I am a logged-in Driver on the 'Advance Request' page of the portal"",""when"":""I enter a valid positive amount (e.g., 5000), provide a reason (e.g., 'Advance for Trip DL01AB1234 fuel and tolls'), and click the 'Submit Request' button"",""then"":""The system validates the input, creates a new advance request record associated with my driver profile, sets its status to 'Pending', and displays a success message 'Your advance request has been submitted successfully.'""},{""scenario"":""Attempt to submit a request with an invalid amount"",""given"":""I am a logged-in Driver on the 'Advance Request' page"",""when"":""I enter a zero or negative amount (e.g., 0 or -100) and try to submit the request"",""then"":""The system prevents submission and displays a clear validation error message, such as 'Amount must be greater than zero.'""}]","[""Create 'tms.advance.request' model"",""Develop OWL component for advance request form""]","[""All acceptance criteria are validated and passing."",""Code is peer-reviewed and merged into the main branch."",""Unit tests are written for the new model and logic, achieving at least 80% coverage."",""Integration tests are completed to verify the request creation and notification trigger."",""Security checks (e.g., access control) are validated."",""The feature is deployed and verified in the staging environment.""]"
"US-056","Driver Portal & Mobile Experience","Driver submits a leave application via the web portal","Driver","As a Driver, I want to submit a leave application through the mobile web portal, specifying the dates and type of leave, so that I can formally request time off and my availability is accurately reflected in the system for dispatch planning.","Streamlines the leave request process, reduces administrative overhead, improves resource planning by providing clear visibility into driver availability, and prevents accidental assignment of drivers on approved leave.","Should Have","5","[""US-046"",""US-011""]","[{""scenario"":""Successful submission of a valid leave application"",""given"":""I am a Driver logged into the Driver Portal and I am on the 'New Leave Request' page"",""when"":""I select a 'Leave Type', choose a 'Start Date' and 'End Date' (where start date is not after end date and not in the past), enter an optional reason, and click 'Submit'"",""then"":""The system creates a new leave application record with a 'Pending' status, I see a success confirmation message, and I am redirected to my list of leave applications where the new request is visible at the top.""},{""scenario"":""Attempt to submit a leave request that overlaps with an existing request"",""given"":""I am a Driver and I have an existing leave request from July 10th to July 15th (status can be 'Pending' or 'Approved')"",""when"":""I try to submit a new leave request for a period that overlaps, such as July 12th to July 17th"",""then"":""The system prevents submission and displays a clear validation error message, such as 'This request overlaps with an existing leave application'.""}]","[""Create 'tms.leave.application' and 'tms.leave.type' models"",""Develop OWL component for leave request form""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented for all validation logic, achieving >80% coverage, and passing"",""Security requirements validated (a driver cannot see another driver's leave)"",""Story deployed and verified in the staging environment""]"
"US-057","Driver Portal & Mobile Experience","Driver views their personal compensation details","Driver","As a Driver, I want to access a clear and simple view of my submitted expenses and earned incentives, so that I can track my personal earnings and reimbursements without needing to contact a manager.","Increases driver satisfaction and trust through financial transparency. Reduces administrative workload by providing a self-service channel for drivers to check payment statuses, leading to fewer support queries.","Must Have","5","[""US-053"",""US-033"",""US-034""]","[{""scenario"":""Driver views their expense reimbursements list"",""given"":""a Driver is logged into the mobile web portal and has submitted multiple expenses"",""when"":""the Driver navigates to the 'My Earnings' or 'Compensation' page"",""then"":""a section titled 'Expense Reimbursements' is displayed, listing all expenses submitted by that driver.""},{""scenario"":""Driver cannot view another driver's compensation data"",""given"":""Driver A is logged into the system"",""when"":""Driver A attempts to access the compensation data for Driver B (e.g., by manipulating a URL parameter)"",""then"":""the system must enforce security rules and prevent access, displaying an 'Access Denied' or similar authorization error.""}]","[""Develop secure Odoo controller to serve compensation data"",""Develop OWL component for compensation view""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by at least one other developer"",""Unit tests implemented for backend logic with >80% coverage"",""Security test case for data segregation is created and passed"",""Performance of the API endpoint is benchmarked and meets requirements"",""Story deployed and verified in the staging environment by QA""]"
"US-058","Core System & Odoo Foundation","User logs into the system with credentials","Registered System User","As a Registered System User (Admin, Dispatch Manager, Finance Officer, or Driver), I want to securely log into the Transport Management System using my email and password, so that I can gain access to the dashboards, features, and data relevant to my specific role and perform my job duties.","Enables secure, role-based access to the system, ensuring that only authorized users can view or manipulate sensitive operational and financial data. This is the primary gateway for all system functionality.","Must Have","1","[""US-001""]","[{""scenario"":""Successful login with valid credentials"",""given"":""I am a registered user with an active account, and I am on the TMS login page"",""when"":""I enter my correct email and password and click the 'Log In' button"",""then"":""I am successfully authenticated, a session is created, and I am redirected to my role-specific dashboard.""},{""scenario"":""Login attempt with an incorrect password"",""given"":""I am on the TMS login page and have entered a valid email for an active account"",""when"":""I enter an incorrect password and click the 'Log In' button"",""then"":""The system displays a generic error message 'Invalid email or password.', I remain on the login page, and the password field is cleared.""}]","[""Leverage Odoo's standard authentication system""]","[""All acceptance criteria validated and passing in a staging environment."",""Code has been peer-reviewed and merged into the main branch."",""Automated E2E tests for the happy path login scenario are created and passing."",""Security checks (HTTPS, no user enumeration) have been manually verified."",""The story has been deployed and verified in the staging environment.""]"
"US-059","Core System & Odoo Foundation","System automatically terminates user session after a configurable period of inactivity","Authenticated system user","As an authenticated system user, I want my session to automatically terminate after a configurable period of inactivity, so that sensitive company and customer data is protected from unauthorized access on an unattended device.","Enhances system security by mitigating the risk of unauthorized access to sensitive data from an unattended, logged-in terminal. This supports compliance with data protection regulations like DPDPA.","Must Have","5","[""US-058"",""US-022""]","[{""scenario"":""Successful Timeout and Logout"",""given"":""an Admin has configured the session timeout to 15 minutes and the warning period to 2 minutes, and a user is logged into the TMS"",""when"":""the user remains inactive for 13 minutes, causing a warning modal to appear, and the user takes no further action for the next 2 minutes"",""then"":""the user is automatically logged out, their session is invalidated on the server, and they are redirected to the login page.""},{""scenario"":""Session Extension from Warning Dialog"",""given"":""the session timeout warning modal is displayed after a period of inactivity"",""when"":""the user clicks the 'Stay Logged In' button before the warning countdown ends"",""then"":""the modal closes, the inactivity timer is reset to its full duration (15 minutes), and the user can continue their work without interruption.""},{""scenario"":""Server-Side Session Invalidation"",""given"":""a user's session has timed out and they have been redirected to the login page"",""when"":""a malicious actor attempts to reuse the old session token to make a direct API call to a protected endpoint"",""then"":""the server rejects the request with an authentication error (e.g., 401 Unauthorized).""}]","[""Implement OWL component for session timeout warning"",""Implement server-side session invalidation logic""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented for backend configuration logic and passing with >80% coverage"",""Automated E2E tests for the timeout and session extension flow are implemented and passing"",""Security requirement for server-side session invalidation is explicitly tested and verified"",""Story deployed and verified in the staging environment""]"
"US-060","Core System & Odoo Foundation","User receives in-app and email notifications for critical events","System User","As a System User (e.g., Dispatch Manager, Finance Officer, Driver), I want to receive timely notifications for important system events via an in-app notification center and email, so that I can stay informed and take prompt action on critical operational, financial, and compliance-related matters.","Improves operational responsiveness by proactively alerting users to critical events, enhances compliance by warning of upcoming deadlines, and increases efficiency by reducing the need for manual system checks.","Must Have","8","[""US-050"",""US-009"",""US-031""]","[{""scenario"":""Manager receives notification for a critical trip event"",""given"":""A Dispatch Manager is logged into the TMS"",""when"":""A driver assigned to an 'In-Transit' trip logs a critical event (e.g., 'Accident') via the driver portal"",""then"":""The Dispatch Manager's in-app notification icon immediately shows an unread count badge.\\nAND clicking the icon reveals a new notification with a summary like 'Trip T-00123: Critical Event 'Accident' logged by Driver John Doe'.\\nAND the manager receives an email with a similar subject and body, containing a direct link to the trip's record.\\nAND clicking the in-app notification navigates the manager to the trip's form view.""},{""scenario"":""System handles email service failure"",""given"":""The external SMTP email service is unavailable"",""when"":""A notifiable event occurs (e.g., a critical trip event is logged)"",""then"":""The in-app notification is still delivered successfully to the user.\\nAND the system logs an error indicating the email delivery failure.\\nAND the failed email job is placed in a retry queue to be attempted later.""}]","[""Implement centralized notification service"",""Develop OWL component for notification center""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented for the notification service and trigger logic, with >80% coverage"",""Integration testing completed for the async job processing and email generation"",""The OWL component for the notification center is implemented, reviewed, and approved"",""Story deployed and verified in the staging environment by QA""]"
"US-061","Core System & Odoo Foundation","User configures notification preferences for type and channel","Authenticated system user","As an authenticated system user, I want to access a settings screen where I can select which types of notifications I receive and choose the delivery channel (in-app or email) for each type, so that I can control the volume of alerts, reduce notification fatigue, and focus on information relevant to my role.","Improves user satisfaction and efficiency by reducing 'alert fatigue'. Ensures that critical notifications are not missed due to an overwhelming volume of less important ones. Increases system usability and adoption.","Should Have","5","[""US-058"",""US-060"",""US-078"",""US-081""]","[{""scenario"":""User can access and view their notification preferences screen"",""given"":""I am an authenticated user logged into the system"",""when"":""I navigate to my user profile or settings area and select 'Notification Preferences'"",""then"":""The system displays a screen listing all notification types applicable to my user role.""},{""scenario"":""System respects the user's configured preferences when sending notifications"",""given"":""I am a Finance Officer and I have configured my preferences to receive 'Low Card Balance' alerts via 'In-App' but NOT via 'Email'"",""when"":""A system event occurs that triggers a 'Low Card Balance' alert targeted to me"",""then"":""I receive a notification within the Odoo application (e.g., bell icon). AND I do not receive an email for this specific alert.""},{""scenario"":""Notification options are filtered based on user role"",""given"":""I am logged in as a 'Driver'"",""when"":""I view my 'Notification Preferences' screen"",""then"":""I do not see options for administrative or financial alerts like 'GSP API Failure' or 'Trip Profitability Report Ready'.""}]","[""Create 'tms.notification.preference' model"",""Refactor notification service to check user preferences""]","[""All acceptance criteria validated and passing."",""Code reviewed and approved by at least one other developer."",""Unit tests implemented for the new model and preference-checking logic, with >80% coverage."",""Integration testing completed to confirm preferences are respected by the notification system."",""Security requirement (users can only edit their own preferences) is validated."",""Story deployed and verified in the staging environment.""]"
"US-062","Core System & Odoo Foundation","Admin schedules and broadcasts advance notification for planned system maintenance","All active system users","As an active system user (Admin, Dispatch Manager, Finance Officer, Driver), I want to receive a clear and timely notification about upcoming planned maintenance at least 24 hours in advance, so that I can plan my work accordingly and avoid disruption to my tasks.","Minimizes operational disruption by allowing users to plan around system downtime. Increases user trust and satisfaction through proactive and professional communication. Reduces support load during maintenance windows.","Must Have","5","[""US-004"",""US-060""]","[{""scenario"":""Admin successfully schedules a maintenance notification with sufficient advance notice"",""given"":""The Admin is logged into the system and navigates to the 'Schedule Maintenance' interface"",""when"":""The Admin creates a new maintenance notification with a start time set for 48 hours in the future, a valid end time, and a clear message about the maintenance impact"",""then"":""The system saves the maintenance schedule, and a notification is immediately sent to all 'Active' users via both the in-app notification system and their registered email address.""},{""scenario"":""Admin attempts to schedule maintenance with less than 24 hours notice"",""given"":""The Admin is logged into the system and is on the 'Schedule Maintenance' form"",""when"":""The Admin sets the maintenance start time to 12 hours from the current time and tries to save"",""then"":""The system prevents saving the record and displays a clear validation error message, such as 'Maintenance must be scheduled at least 24 hours in advance.'""}]","[""Create 'tms.maintenance.notification' model and views"",""Implement logic to broadcast notifications to all active users""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented for business logic with >80% coverage and passing"",""Performance requirements verified (asynchronous sending)"",""Security requirements validated (Admin-only access)"",""Story deployed and verified in staging environment""]"
"US-063","Reporting & Dashboards","Manager exports a report to Excel or PDF for offline use","Manager","As a Manager (Admin, Dispatch Manager, or Finance Officer), I want to export any report I am viewing to either an Excel or PDF file, so that I can perform offline analysis, share the data with stakeholders, and archive records for compliance and historical purposes.","Enables data portability for offline analysis, sharing with external stakeholders, and creating physical or digital archives for auditing and record-keeping.","Must Have","5","[""US-036"",""US-045""]","[{""scenario"":""Successful export of filtered data to Excel"",""given"":""I am viewing the 'Trip Profitability Report' and have filtered it by a specific customer and date range"",""when"":""I click the 'Export to Excel' button"",""then"":""the browser initiates a download of an '.xlsx' file.""},{""scenario"":""Successful export of filtered data to PDF with proper formatting"",""given"":""I am viewing the 'Outstanding Invoices Report' and have filtered it to show invoices overdue by more than 60 days"",""when"":""I click the 'Export to PDF' button"",""then"":""the browser initiates a download of a '.pdf' file.""}]","[""Develop Suite of Standard Reports""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented for the export logic, achieving >= 80% coverage"",""Performance for exporting 1,000 records verified to be under 10 seconds"",""Security requirements validated by testing with different user roles"",""Story deployed and verified in the staging environment""]"
"US-064","Reporting & Dashboards","Manager views the main dashboard with operational and financial KPIs","Manager","As a Manager (Admin or Dispatch Manager), I want to view a real-time, consolidated dashboard with key operational and financial widgets, so that I can quickly assess the health of the business, identify immediate priorities, and make informed decisions without needing to run multiple reports.","Provides an at-a-glance overview of business health, enabling faster, data-driven decision-making and proactive identification of operational issues. Reduces time spent running individual reports.","Must Have","8","[""US-006"",""US-026"",""US-037"",""US-053"",""US-009"",""US-050""]","[{""scenario"":""Vehicle Status widget displays correct data"",""given"":""I am viewing the main dashboard"",""when"":""the 'Vehicle Status' widget finishes loading"",""then"":""I see a pie chart correctly representing the proportion of all 'Active' vehicles in 'Available', 'On-Trip', and 'In-Maintenance' statuses, and hovering over a slice displays the exact vehicle count.""},{""scenario"":""Clicking on a KPI card navigates to a relevant filtered list"",""given"":""The KPI cards are displayed"",""when"":""I click on the 'Delayed Trips' KPI card"",""then"":""I am navigated to the Trip list view, pre-filtered to show only trips that are 'In-Transit' and past their 'Expected Delivery Date'.""},{""scenario"":""Unauthorized user is denied access to the dashboard"",""given"":""I am a user logged in with the 'Driver' role"",""when"":""I attempt to navigate to the manager dashboard URL"",""then"":""I am shown an 'Access Denied' error page and am not able to view the dashboard.""}]","[""Develop Manager Dashboard Component""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented for all KPI calculation logic with >80% coverage"",""Performance requirements (LCP < 3s) verified"",""Security requirements (role-based access) validated"",""Story deployed and verified in staging environment""]"
"US-065","Reporting & Dashboards","Manager views and acknowledges critical alerts on the dashboard","Manager","As a Dispatch Manager or Admin, I want to view a dedicated panel of critical system alerts on my dashboard and be able to acknowledge them, so that I can immediately identify and take action on urgent operational issues, ensuring timely resolution and clear accountability.","Improves operational responsiveness by centralizing critical, time-sensitive information. Reduces risk by ensuring urgent issues are seen and acted upon promptly. Increases accountability by tracking who acknowledged an issue and when.","Must Have","8","[""US-064"",""US-050"",""US-077"",""US-078"",""US-081""]","[{""scenario"":""Display of a new critical trip event alert"",""given"":""I am a logged-in Manager viewing the main dashboard, and a driver has just logged a critical event ('Accident') for an active trip"",""when"":""the dashboard loads or updates"",""then"":""the 'Critical Alerts' panel must display a new, unacknowledged alert.""},{""scenario"":""Acknowledging a critical alert"",""given"":""I am viewing an unacknowledged alert in the 'Critical Alerts' panel"",""when"":""I click the 'Acknowledge' button for that specific alert"",""then"":""the alert's visual state must change to 'acknowledged' (e.g., background becomes grey, icon changes).""},{""scenario"":""Alert panel updates without full page reload"",""given"":""I have the dashboard open and visible on my screen"",""when"":""a new critical event is triggered elsewhere in the system (e.g., by a driver's action)"",""then"":""the new alert must appear in the 'Critical Alerts' panel within 15 seconds without requiring me to manually refresh the page.""}]","[""Develop Manager Dashboard Component"",""Create 'tms.alert' model"",""Integrate with Odoo Bus for real-time updates""]","[""All acceptance criteria validated and passing in a staging environment."",""Code has been peer-reviewed and merged into the main branch."",""Unit test coverage for new logic is at or above the project standard (80%)."",""An end-to-end automated test for the primary success scenario has been created and is passing."",""The performance impact on dashboard loading has been measured and is within acceptable limits."",""Security audit trail for acknowledgment is confirmed to be working.""]"
"US-066","Reporting & Dashboards","Manager generates a Driver Performance Report","Manager","As a Dispatch Manager or Admin, I want to generate a filterable Driver Performance Report with key metrics like on-time delivery percentage, total trips, and incentives earned, so that I can objectively evaluate driver performance, provide data-driven feedback, and identify opportunities for recognition or training.","Enables data-driven driver management, improves operational oversight, helps in identifying top performers and drivers needing support, and provides objective data for performance reviews and incentive programs.","Must Have","5","[""US-011"",""US-026"",""US-050"",""US-052"",""US-054""]","[{""scenario"":""Report Data Columns"",""given"":""the Driver Performance Report is displayed"",""when"":""the user views the report table"",""then"":""the table must contain the following columns: 'Driver Name', 'Total Trips Completed', 'On-Time Delivery %', 'Total Distance (km)', 'Average Fuel Efficiency (km/l)', 'Total Approved Expenses', 'Total Incentives Earned', and 'Number of Critical Events'.""},{""scenario"":""Calculation of On-Time Delivery Percentage"",""given"":""a driver has completed multiple trips with 'Expected Delivery Dates' and POD timestamps"",""when"":""the system calculates the 'On-Time Delivery %'"",""then"":""the value is calculated as `(Number of trips where POD submission timestamp <= Expected Delivery Date) / (Total number of 'Delivered' trips) * 100`.""},{""scenario"":""Access Control"",""given"":""a user is logged in with a 'Driver' or 'Finance Officer' role"",""when"":""the user attempts to access the Driver Performance Report URL"",""then"":""the system denies access and shows a standard 'Access Denied' page.""}]","[""Develop Suite of Standard Reports""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by at least one other developer"",""Unit tests for all calculation logic implemented with >80% coverage"",""Performance testing confirms report generation is within the 5-second threshold"",""Security access controls are verified"",""Story deployed and verified in the staging environment""]"
"US-067","Reporting & Dashboards","Manager generates a Fuel Efficiency Report","Manager","As a Manager (Admin or Dispatch Manager), I want to generate a fuel efficiency report (km/liter) for each vehicle so that I can monitor fuel consumption, identify inefficient vehicles or driving patterns, and take corrective actions to control fuel costs.","Provides critical insights into a major operational expense (fuel), enabling data-driven decisions for vehicle maintenance, driver training, and cost reduction, thereby improving overall fleet profitability.","Must Have","5","[""US-006"",""US-053"",""US-054"",""US-063""]","[{""scenario"":""Generate report with valid data"",""given"":""I am a logged-in Manager on the 'Fuel Efficiency Report' page"",""when"":""I select a date range and one or more vehicles that have had at least two 'Diesel' expense entries with odometer readings within that period, and I click 'Generate Report'"",""then"":""The system displays a table with rows for each selected vehicle, containing columns for 'Vehicle Number', 'Total Distance (km)', 'Total Fuel (Liters)', and 'Fuel Efficiency (km/L)'. The 'Total Distance' is calculated as the difference between the last and first odometer readings within the period. The 'Total Fuel' is the sum of all diesel quantities within the period. The 'Fuel Efficiency' is correctly calculated as (Total Distance / Total Fuel).""},{""scenario"":""Vehicle has fuel expenses but no travel (or only one odometer reading)"",""given"":""I am on the 'Fuel Efficiency Report' page"",""when"":""I generate a report for a period where a vehicle has 'Diesel' expenses but only one or zero odometer readings recorded"",""then"":""The report row for that vehicle displays 'Total Distance (km)' as 0, and 'Fuel Efficiency (km/L)' as '0' or 'N/A'.""}]","[""Develop Suite of Standard Reports""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by at least one other developer"",""Unit tests for the calculation logic achieve >80% code coverage"",""Performance testing confirms report generation is within the 15-second threshold for the specified load"",""Security rules restricting access to authorized roles are verified"",""Story deployed and verified in the staging environment by a QA engineer and the Product Owner""]"
"US-068","Reporting & Dashboards","Manager generates a Vehicle Profitability Report","Manager","As a Manager (Admin, Dispatch Manager, or Finance Officer), I want to generate a Vehicle Profitability Report that aggregates total revenue and total expenses for each vehicle over a specific period, so that I can analyze the financial performance of each asset, identify underperforming vehicles, and make informed decisions about fleet optimization and investment.","Enables data-driven asset management by providing clear financial performance indicators for each vehicle. This helps optimize fleet usage, justify asset replacement or disposal, and improve overall company profitability.","Must Have","8","[""US-006"",""US-026"",""US-033"",""US-041"",""US-063""]","[{""scenario"":""Accurate Revenue Calculation"",""given"":""A Vehicle Profitability Report has been generated for a specific date range"",""when"":""I view the 'Total Revenue' column for a specific vehicle"",""then"":""The value must be the sum of the revenue from all trips assigned to that vehicle with a 'Completed' date that falls within the selected date range.""},{""scenario"":""Accurate and Comprehensive Expense Calculation"",""given"":""A Vehicle Profitability Report has been generated for a specific date range"",""when"":""I view the 'Total Expenses' column for a specific vehicle"",""then"":""The value must be the sum of all 'Approved' trip-related expenses AND all non-trip-related expenses (e.g., Maintenance, Insurance) associated with that vehicle, where the expense date falls within the selected date range.""},{""scenario"":""Vehicle with Only Expenses"",""given"":""A vehicle incurred maintenance costs but completed no trips within the selected date range"",""when"":""I generate the report for that period"",""then"":""The vehicle is included in the report with 'Total Revenue' as 0, 'Total Expenses' as the sum of its costs, and a corresponding negative 'Net Profit'.""}]","[""Develop Suite of Standard Reports""]","[""All acceptance criteria validated and passing"",""Code reviewed and approved by team"",""Unit tests implemented for all calculation logic, achieving >80% coverage"",""Performance testing confirms report generation is within NFRs"",""Security access rules are implemented and tested"",""Story deployed and verified in the staging environment""]"
"US-069","Reporting & Dashboards","Manager generates a Detailed Expense Report with comprehensive filtering and export capabilities","Manager","As a Manager (Dispatch Manager, Finance Officer, or Admin), I want to generate a detailed expense report with flexible filtering options (by date range, expense type, vehicle, and driver), so that I can perform in-depth analysis of operational costs, identify spending trends, and make informed decisions to improve financial efficiency.","Provides critical insights into operational costs, enabling better budget management, identification of cost-saving opportunities, and enhanced financial oversight.","Must Have","8","[""US-053"",""US-033"",""US-041"",""US-006"",""US-011""]","[{""scenario"":""Generate and filter the report by multiple criteria"",""given"":""The system contains multiple expense records for various trips, vehicles, drivers, and expense types across different dates"",""when"":""A Manager navigates to the 'Detailed Expense Report', selects a date range, filters by 'Vehicle' and 'Expense Type' (e.g., 'Diesel')"",""then"":""The system displays a paginated table containing only the expense records that match all applied filter criteria.""},{""scenario"":""Report data columns and summary"",""given"":""A filtered expense report is displayed on the screen"",""when"":""The Manager views the report table"",""then"":""The table must include the following sortable columns: 'Expense Date', 'Trip ID' (if applicable), 'Vehicle Number', 'Driver Name', 'Expense Type', 'Amount', 'Approval Status', and a link/button to view the attached receipt.""},{""scenario"":""Access control for the report"",""given"":""A user with the 'Driver' role is logged into the system"",""when"":""The user attempts to navigate to the Detailed Expense Report URL or menu item"",""then"":""The system must deny access and show an 'Access Denied' error, as per Odoo's standard security behavior.""}]","[""Develop Suite of Standard Reports""]","[""All acceptance criteria validated and passing in the staging environment."",""Code has been peer-reviewed and merged into the main branch."",""Unit test coverage for the new logic is at or above the project standard (e.g., 80%)."",""Performance testing against a large dataset confirms the NFRs are met."",""Security review confirms that access controls are correctly implemented."",""The Product Owner has reviewed and approved the completed feature.""]"
"US-070","Core System & Odoo Foundation","System Enforces Role-Based Access Control (RBAC) for All Data Models","System Administrator","As a System Administrator, I want the system to strictly enforce data access and modification rights based on a user's assigned role, so that sensitive company data is protected, operational integrity is maintained, and each user can only perform actions relevant to their job function.","Ensures data security and confidentiality, enforces the principle of least privilege, prevents unauthorized actions, reduces the risk of user error, and supports compliance with data protection regulations (DPDPA).","Must Have","8","[""US-004"",""US-026"",""US-037"",""US-053""]","[{""scenario"":""Admin has unrestricted access"",""given"":""A user is logged in with the 'Admin' role"",""when"":""The user navigates to any module (e.g., Trips, Invoicing, Users, Settings)"",""then"":""The user has full Create, Read, Update, and Delete (CRUD) permissions on all data records and can access all system configuration settings.""},{""scenario"":""Dispatch Manager is restricted from financial and admin functions"",""given"":""A user is logged in with the 'Dispatch Manager' role"",""when"":""The user attempts to access User Management or generate a final customer Invoice"",""then"":""The system prevents the action, either by hiding the relevant menu items and buttons or by raising an access error if accessed directly.""},{""scenario"":""Driver has restricted, personal access (Record-Level Security)"",""given"":""A user is logged in with the 'Driver' role"",""when"":""The user navigates to the list of Trips"",""then"":""The user can ONLY see Trip records where they are the assigned driver.""},{""scenario"":""Driver is restricted from viewing sensitive financial data (Field-Level Security)"",""given"":""A user with the 'Driver' role is viewing a Trip form assigned to them"",""when"":""The Trip form is displayed"",""then"":""Fields such as 'Rate', 'Total Revenue', and 'Profitability' are not visible on the user interface.""}]","[""Implement Role-Based Access Control (RBAC) Groups"",""Create ir.model.access.csv for all TMS models"",""Create ir.rule records for data segregation""]","[""All acceptance criteria validated and passing for all defined roles."",""Code for security groups, access rights (`ir.model.access.csv`), and record rules (`ir.rule`) is implemented and peer-reviewed."",""XML views are updated with `groups` attributes where necessary."",""Automated integration tests are written to verify key access restrictions (e.g., driver can only see their trips)."",""A manual testing cycle has been completed by QA, logging in as each user type to confirm UI and data visibility."",""Story deployed and verified in the staging environment.""]"
"US-091","Project Management","User receives role-based training and materials for the new TMS","New system user","As a new system user (Admin, Manager, Finance Officer, or Driver), I want to receive training materials and sessions tailored to my specific job responsibilities, so that I can confidently and effectively use the Transport Management System from the first day of go-live.","Ensures smooth user adoption, reduces post-launch errors and support requests, minimizes business disruption during cutover, and maximizes the return on investment in the new system.","Must Have","13","[""US-046""]","[{""scenario"":""Instructor-Led Training for Office Staff"",""given"":""The TMS is feature-complete and stable in the staging environment"",""when"":""An Admin, Dispatch Manager, or Finance Officer attends their scheduled, role-specific training session"",""then"":""They can successfully complete a set of predefined key tasks for their role in the staging environment and confirm their understanding of the system.""},{""scenario"":""Driver Accesses Video Tutorials"",""given"":""A Driver is logged into the mobile-friendly web portal"",""when"":""They navigate to the 'Help & Training' section"",""then"":""They see a list of short video tutorials covering their key tasks (e.g., 'How to Submit an Expense', 'How to Upload a POD') and can play them directly within the browser.""}]","[""Develop Driver Portal 'Help & Training' page""]","[""All acceptance criteria validated and passing"",""All training materials (User Manual, Videos, QRG) created, reviewed, and approved"",""Software component for Driver Portal training page is developed, code-reviewed, tested, and deployed to staging"",""All instructor-led training sessions have been completed and attendance recorded"",""A process for training new hires post-launch has been documented and handed over to the business""]"
"US-092","Driver Portal & Mobile Experience","Driver: Access Self-Service Training Materials in Mobile Portal","Driver","As a Driver, I want to access a dedicated 'Help & Training' section within my mobile portal that contains short video tutorials and a downloadable quick-reference guide, so that I can learn how to use the system's features correctly at my own pace and quickly find answers to my questions while on the road.","Reduces the support load on dispatch and admin staff by empowering drivers with self-service training. Improves driver proficiency, reduces operational errors, and increases user adoption. Provides a scalable and consistent training method for all drivers.","Should Have","3","[""US-046""]","[{""scenario"":""Navigation to Training Section"",""given"":""I am a user with the 'Driver' role and I am logged into the mobile-friendly web portal"",""when"":""I view the main navigation menu of the portal"",""then"":""I see a clearly labeled and easily tappable option for 'Help & Training'.""},{""scenario"":""Playing a Video Tutorial"",""given"":""I am on the 'Help & Training' page with a list of videos"",""when"":""I tap on a video tutorial's title or thumbnail"",""then"":""an embedded video player loads and plays the video directly within the page without navigating away.""},{""scenario"":""No Training Materials Available"",""given"":""I have navigated to the 'Help & Training' page AND no training materials have been uploaded by an Admin"",""when"":""the page loads"",""then"":""I see a user-friendly message, such as 'No training materials are available at this time. Please check back later.'""}]","[""Create 'tms.training.material' model"",""Develop Driver Portal 'Help & Training' OWL component""]","[""All acceptance criteria validated and passing on target mobile browsers."",""Code has been peer-reviewed and merged into the main development branch."",""Unit tests for the new Odoo model and controller achieve >80% coverage."",""E2E tests simulating the driver's journey are implemented and passing."",""The feature is deployed and verified in the staging environment.""]"